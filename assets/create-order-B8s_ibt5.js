function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/header-PvCgrtlO.js","assets/use-call-dom-8Q8ZjlCD.js","assets/order-list-Clq43UrK.js","assets/use-api-CoVlJz1c.js","assets/js.cookie-Cz0CWeBA.js","assets/render-cart-BSVPqZQw.js","assets/dropdown-MNiyI8bl.js","assets/order-accordion-D1drgPeA.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{u as x,s as O,r as S,_ as L}from"./lazy-load-C3ije9Oq.js";import{i as T}from"./dropdown-MNiyI8bl.js";import{g as a}from"./use-call-dom-8Q8ZjlCD.js";import{J as w}from"./just-validate.es-C73wyOde.js";import{i as E}from"./use-api-CoVlJz1c.js";import{I as m}from"./index-yFKSUj0c.js";import"./js.cookie-Cz0CWeBA.js";function k(){return new Promise(r=>{const l=a("#create-order");if(!l)return;const o=new w(l,{focusInvalidField:!0,lockForm:!1,validateBeforeSubmitting:!0});o.addField("#first-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#last-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#address-line1",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#address-line2",[{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#city",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Enter a valid city name"}]).addField("#state",[{rule:"required",errorMessage:"This field is required"}]).addField("#zip",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:3,errorMessage:"Must be at least 3 characters"},{rule:"maxLength",value:10,errorMessage:"Must be less than 10 characters"},{rule:"customRegexp",value:/^\d+$/,errorMessage:"Enter a valid ZIP / Postal Code"}]).addField("#mail",[{rule:"required",errorMessage:"This field is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})$/,errorMessage:"Write correct email"}]).addField("#phone",[{rule:"required",errorMessage:"This field is required"},{rule:"maxLength",value:19,errorMessage:"Must be less than 13 characters"}]).addField("#card",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:19,errorMessage:"Must be at least 16 characters"}]).addField("#expiration",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:5,errorMessage:"Must be at least 4 characters"}]).addField("#cvc",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:3,errorMessage:"Must be at least 3 characters"}]),o.validate(),o.onSuccess(()=>r(!0)),o.onFail(()=>r(!1))})}const q=a(".create-order-form__btn"),F=a(".order-list__btn"),s=JSON.parse(localStorage.getItem("userInfo")||"null"),t=JSON.parse(localStorage.getItem("orderInfo")||"null"),g=a("#first-name"),f=a("#last-name"),p=a("#address-line1"),h=a("#address-line2"),M=a("#city"),v=a("#state"),_=a("#zip"),I=a("#mail"),n=a("#phone"),d=a("#card"),u=a("#expiration"),c=a("#cvc"),b=[g,f,p,h,M,v,_,I,n,d,u,c];function z(){!q||!F||(P(),R(),F.addEventListener("click",()=>{q.click()}),q.addEventListener("click",async()=>{try{await k()&&(V(),N())}catch(r){console.error(r)}}))}function N(){s||(localStorage.removeItem("cartItems"),window.location.href="/Vitamin/successful-order.html");const r=JSON.parse(localStorage.getItem("cartItems")||"[]");if(r.length===0){console.log("Cart is empty!");return}console.log(s);const l={order:r.map(o=>({product_id:o.id,quantity:o.counts})),user_id:s.user_id};try{E(l).then(o=>{console.log("Order created successfully:",o),localStorage.removeItem("cartItems"),window.location.href="/Vitamin/successful-order.html"})}catch(o){console.error(o)}}function R(){!d||!u||!c||!n||(m(d,{mask:"0000-0000-0000-0000"}),m(u,{mask:"00/00"}),m(c,{mask:"000"}),m(n,{mask:"+000 (00) 00 00 000"}))}function i(r){if(r)return r.value}function V(){if(b.some(l=>!l))return;const r={firstName:i(g),lastName:i(f),addressFirst:i(p),addressSecond:i(h),city:i(M),state:i(v),zip:i(_),email:i(I),phone:i(n),card:i(d),date:i(u),cvc:i(c)};console.log("Order created:",r),localStorage.setItem("orderInfo",JSON.stringify(r))}function e(r,l){r&&(r.value=l||"")}function P(){if(!b.some(r=>r===null)&&!(!s&&!t)){if(t&&!s){e(g,t.firstName),e(f,t.lastName),e(p,t.addressFirst),e(h,t.addressSecond),e(M,t.city),e(v,t.state),e(_,t.zip),e(I,t.email),e(n,t.phone),e(d,t.card),e(u,t.date),e(c,t.cvc);return}if(s){e(g,s.first_name),e(f,s.last_name),e(p,s.address_one),e(h,s.address_two),e(M,s.city),e(v,s.state_province),e(_,s.postal_code),e(I,s.email),e(n,s.phone),e(d,s.card_info.card_number),e(u,s.card_info.card_date),e(c,s.card_info.card_cvv);return}}}document.addEventListener("DOMContentLoaded",async()=>{[{importFn:()=>L(()=>import("./header-PvCgrtlO.js"),__vite__mapDeps([0,1])),selector:".header"},{importFn:()=>L(()=>import("./order-list-Clq43UrK.js"),__vite__mapDeps([2,1,3,4,5,6])),selector:".order-list__prods"},{importFn:()=>L(()=>import("./order-accordion-D1drgPeA.js"),__vite__mapDeps([7,1])),selector:".accordion"}].forEach(({importFn:o,selector:y})=>x(o,y)),z();const l=a(".deliver-info__subitem_dropdown");l&&(T(l),O())});S();
