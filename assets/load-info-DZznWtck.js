import{i as F}from"./dropdown-ojf4R2tx.js";import{i as $}from"./use-api-DMCIcZDv.js";import{g as n,c as s}from"./use-call-dom-CaqOo_cc.js";import{c as g}from"./cart-DEGXaMi9.js";import{c as R,d as w,r as W,e as H}from"./cart-operation-DVIxt9a1.js";import{i as U}from"./render-cart-BjMqmgPO.js";import"./js.cookie-Cz0CWeBA.js";const q=new URLSearchParams(window.location.search),y=q.get("id")||void 0,b=n(".autoship__on-off");async function z(t){if(b&&y)try{const e=await $(y);J(e,t)}catch(e){console.error(e)}}function J(t,e){if(b){if(b.classList.contains("autoship__on-off_active")){if(!JSON.parse(localStorage.getItem("cartItems")||"[]").some(u=>u.id===t.id)){R(t),w(t),g(e);return}w(t),g(e);return}W(t)}}const O=new URLSearchParams(window.location.search),j=O.get("id")||void 0,p=n(".add-to-cart__btn");async function G(t){if(p&&j){if(!p)return;p.addEventListener("click",e=>{H(t),g(e)})}}const K=new URLSearchParams(window.location.search),k=K.get("id")||void 0,x=n(".autoship__dropdown"),d=n(".ilustrate"),r=n(".info__category"),l=n(".count__svg svg use"),L=n(".info__name"),S=n(".count__capsules span"),A=n(".count__mg span"),f=n(".autoship__text"),m=n(".add-to-cart__price"),V=n(".descripton__info"),E=n(".safety .inf"),M=n(".indications .inf"),D=n(".ingredients .inf"),B=n(".directions .inf"),C=n(".legal .inf"),Q=[d,r,l,L,S,A,f,m,V,E,M,D,B,C],T=n(".count__minus"),P=n(".count__plus"),h=n(".count__items");async function ot(){if(!(!k||!x))try{const t=await $(k);await G(t),U(".count__counter"),X(t),Y(),Z(t),F(x)}catch(t){console.error(t)}}function i(t){if(t)return t}function c(t,e,a){if(t)switch(e){case"innerText":t.textContent=a;break;case"innerHTML":t.innerHTML=a;break}}function X(t){if(Q.some(o=>!o))return;switch(t.type){case"Vitamins & Dietary Supplements":s(i(d),"add","ilustrate_purple");break;case"Minerals":s(i(d),"add","ilustrate_green-mint");break;case"Prenatal Vitamins":s(i(d),"add","ilustrate_pink");break;case"Pain Relief":s(i(d),"add","ilustrate_blue");break;case"Antioxidants":s(i(d),"add","ilustrate_orange");break;case"Weight Loss":s(i(d),"add","ilustrate_dark-blue");break;case"Probiotics":s(i(d),"add","ilustrate_red");break;case"Sale%":s(i(d),"add","ilustrate_red");break}const e=n(".ilustrate__content");if(!e||(e.innerHTML=`
     <picture>
        <source srcset="${t.img.img_webp}" type="image/webp">
        <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}"/>
     </picture>`,!r))return;switch(t.type){case"Vitamins & Dietary Supplements":s(i(r),"add","info__category_purple"),r.href="/Vitamin/shop.html?category=Vitamins+%26+Dietary+Supplements",i(l)?.setAttribute("href","#can");break;case"Minerals":s(i(r),"add","info__category_green-mint"),r.href="/Vitamin/shop.html?category=Minerals",i(l)?.setAttribute("href","#bottle");break;case"Prenatal Vitamins":s(i(r),"add","info__category_pink"),r.href="/Vitamin/shop.html?category=Prenatal+Vitamins",i(l)?.setAttribute("href","#kit");break;case"Pain Relief":s(i(r),"add","info__category_blue"),r.href="/Vitamin/shop.html?category=Pain+Relief",i(l)?.setAttribute("href","#box");break;case"Antioxidants":s(i(r),"add","info__category_orange"),r.href="/Vitamin/shop.html?category=Antioxidants",i(l)?.setAttribute("href","#can");break;case"Weight Loss":s(i(r),"add","info__category_dark-blue"),r.href="/Vitamin/shop.html?category=Weight+Loss",i(l)?.setAttribute("href","#bottle");break;case"Probiotics":s(i(r),"add","info__category_red"),r.href="/Vitamin/shop.html?category=Probiotics",i(l)?.setAttribute("href","#kit");break;case"Sale%":s(i(r),"add","info__category_red"),r.href="/Vitamin/shop.html?category=Sale%25",i(l)?.setAttribute("href","#kit");break}c(r,"innerText",t.type),c(L,"innerText",t.name),c(S,"innerText",t.capsules.toString()),c(A,"innerText",t.weight_mg.toString()),window.innerWidth<768&&c(f,"innerText","Deliver every"),window.addEventListener("resize",()=>{window.innerWidth<768&&c(f,"innerText","Deliver every"),window.innerWidth>=768&&c(f,"innerText","Autoship this item every")});const a=N(t.price,t.discount);t.type==="Sale%"?(s(i(m),"add","add-to-cart__price_sale"),c(m,"innerHTML",`<span><span class="price">$${t.price}</span> <span class="discount">-${t.discount}%</span></span> $${a}`)):c(m,"innerText",`$${t.price}`),tt(i(m),t),c(V,"innerText",t.description),c(E,"innerText",t.satefy_information),c(M,"innerText",t.indications),c(D,"innerText",t.ingradients),c(B,"innerText",t.directions),c(C,"innerText",t.legal_disclaimer)}function Y(){const t=n(".info__backbtn");t&&t.addEventListener("click",()=>{window.location.href="/Vitamin/shop.html"})}function Z(t){const e=n(".autoship__on-off");if(!e)return;const a=n(".autoship__circle",e);a&&t.disabled_subscribe===!0&&e.addEventListener("click",async o=>{e.classList.toggle("autoship__on-off_active"),a.classList.toggle("autoship__circle_active"),await z(o)})}function N(t,e,a=1){const o=parseFloat(t);if(isNaN(o))throw new Error("Invalid price format");const u=Math.round(o*(1-e/100)*100)/100;return(Math.round(u*a*100)/100).toFixed(2)}function I(t,e=1){const a=parseFloat(t);if(isNaN(a))throw new Error("Invalid price format");return(a*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function tt(t,e){if(!t||!P||!T||!h)return;let a=Number(h.innerText),o="",u="";P.addEventListener("click",()=>{v(a,h,o,u,t,e)}),T.addEventListener("click",()=>{v(a,h,o,u,t,e)})}function v(t,e,a,o,u,_){if(t=Number(e.innerText),a=I(_.price,t),o=N(_.price,_.discount,t),_.type==="Sale%"){u.innerHTML=`<span><span class="price">$${a}</span> <span class="discount">-${_.discount}%</span></span> $${o}`;return}u.innerText=`$${a}`}export{ot as default};
