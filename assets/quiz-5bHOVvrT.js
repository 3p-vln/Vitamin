import"./modulepreload-polyfill-B5Qt9EMX.js";import"./style-l0sNRNKZ.js";import{g as i,a as o,c as l}from"./use-call-dom-8Q8ZjlCD.js";import{J as w}from"./just-validate.es-C73wyOde.js";function d(){return new Promise(e=>{const t=i("#firstQuestion"),a=i("#firstName");if(!t||!a){e(!1);return}const r=new w(t,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0});if(r.addField("#firstName",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]),document.readyState==="complete"){r.revalidate().then(s=>{s&&localStorage.setItem("firstName",a.value),e(s)});return}e(!1)})}function f(){return new Promise(e=>{const t=i("#emailQuestion"),a=i("#email");if(!t||!a){e(!1);return}const r=new w(t,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0});if(r.addField("#email",[{rule:"required",errorMessage:"This field is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})$/,errorMessage:"Write correct email"}]),document.readyState==="complete"){r.revalidate().then(s=>{e(s)});return}e(!1)})}const m=i(".count__current"),u=o(".quiz"),h=o("#next-btn"),v=i(".back");let n=p();function p(){const e=new URLSearchParams(window.location.search);return parseInt(e.get("question")||"0",10)}function _(e){const t=new URLSearchParams(window.location.search);t.set("question",e.toString()),window.history.replaceState({},"",`${window.location.pathname}?${t.toString()}`)}function g(e){u.forEach(t=>t.classList.remove("active")),u[e].classList.add("active"),m&&(m.textContent=(e+1).toString()),_(e)}function c(e){const t=n+e;t>=0&&t<u.length&&(n=t,g(n)),t<0&&window.history.back()}async function L(){g(n),h&&(await d(),await f(),h.forEach(e=>{e.addEventListener("click",async t=>{if(t.preventDefault(),n===0){if(!await d())return;c(1);return}if(n===8){if(!await f())return;window.location.href="/personal-pack.html";return}c(1)})}),v&&v.addEventListener("click",()=>c(-1)))}const q=o(".quiz__btns");function E(){q.forEach(e=>{const t=o(".quiz__btn",e);t.forEach(a=>{a.addEventListener("click",()=>{t.forEach(r=>{l(r,"remove","quiz__btn_active")}),a.classList.contains("quiz__btn_active")||l(a,"add","quiz__btn_active")})})})}document.addEventListener("DOMContentLoaded",async()=>{L(),E()});
