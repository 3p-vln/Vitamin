import{g as s,c as p}from"./use-call-dom-DDNnwvp7.js";import{a as h}from"./js.cookie-Cz0CWeBA.js";import{s as y}from"./scroll-lock-DIYiYMmB.js";function k(){const e=document.querySelectorAll(".header__user-name"),t=localStorage.getItem("userInfo");if(e&&t){const n=JSON.parse(t);e.forEach(o=>{const i=o;i.innerText=`${n.first_name} ${n.last_name}`})}}function L(){document.querySelectorAll(".sign-out").forEach(t=>{t.addEventListener("click",()=>{window.location.href="/Vitamin",localStorage.removeItem("userInfo"),h.remove("accessToken",{path:"/"}),h.remove("refreshToken",{path:"/"})})})}function B(){const e=document.getElementById("authPopup"),t=document.querySelector(".header__profile"),n=h.get("accessToken");t&&t.addEventListener("click",()=>{n?window.location.href="/Vitamin/profile.html":e.show()}),window.showPopup=function(){e.show()},e.querySelector(".auth-pop-up__close").addEventListener("click",()=>{e.close()}),e.addEventListener("click",i=>{const a=e.querySelector(".auth-pop-up__container"),c=i.target;c instanceof Node&&!a.contains(c)&&e.close()})}const w=s(".burger__btn"),r=s(".burger__menu.main"),f=s(".header__bag"),d=s(".header__logo"),u=s(".pack-info__bg_hulf-circle"),l=s(".header");function T(){if(!r)return;const e=s(".menu__item_shop",r),t=s(".menu__item_info",r),n=s(".header__profile",r),o=s(".burger__menu.shop"),i=s(".burger__menu.info"),a=s(".burger__menu.profile");$(),w&&e&&o&&t&&i&&n&&a&&(m("burger__btn","main"),m("menu__item_shop","shop"),m("menu__item_info","info"),m("header__profile_adapt","profile"),g("shop__title","shop"),g("info__title","info"),g("profile__title","profile"),x(o,i,a)),k(),L(),B()}function m(e,t){const n=s(`.${e}`),o=s(`.${t}`);n&&o&&n.addEventListener("click",()=>{const i=!o.classList.contains(`${t}_active`);if(o.classList.contains("main")){o.classList.toggle(`${t}_active`),n.classList.toggle(`${e}_active`),S(),i?y.disablePageScroll():y.enablePageScroll(),b(o,i);return}o.classList.add(`${t}_active`),b(o,i)})}function g(e,t){if(e){const n=s(`.${e} .back-btn`),o=s(`.${t}`);if(n&&o){n.addEventListener("click",()=>{const i=!o.classList.contains(`${t}_active`);o.classList.remove(`${t}_active`),b(o,i)});return}}}function S(){if(f&&d&&r){if(r.classList.contains("main_active")){d.style.opacity="0",f.style.display="none",u&&(u.style.display="none");return}u&&(u.style.display="block"),d.style.opacity="1",f.style.display="block"}}function $(){v(),window.addEventListener("scroll",v)}function v(){l&&(window.scrollY>50?(l.style.backgroundColor="white",l.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",l.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(l.style.backgroundColor="transparent",l.style.boxShadow="none"))}function b(e,t){function o(a){return a<.5?2*a*a:-1+(4-2*a)*a}function i(a){const _=t?a:1-a;e.style.height=`${_*100}dvh`,e.style.opacity=`${_}`}t&&(e.style.visibility="visible"),E({timing:o,draw:i,duration:300}),t||setTimeout(()=>{e.style.visibility="hidden",e.style.height="0"},300)}function E({timing:e,draw:t,duration:n}){let o=performance.now();requestAnimationFrame(function i(a){let c=(a-o)/n;c>1&&(c=1);let _=e(c);t(_),c<1&&requestAnimationFrame(i)})}function x(e,t,n){window.addEventListener("resize",()=>{if(window.innerWidth>=768){if(w?.classList.remove("burger__btn_active"),!r||!e||!t||!n)return;p(r,"remove","main_active"),r.style.visibility="hidden",r.style.height="0vh",r.style.opacity="0",u&&(u.style.display="block"),f&&d&&(d.style.opacity="1",f.style.display="block"),y.enablePageScroll(),p(e,"remove","shop_active"),p(t,"remove","info_active"),p(n,"remove","profile_active")}})}export{T as default};
