import"./style-CWWArEq8.js";import{g as s,r as l,c as o}from"./use-call-dom-DDNnwvp7.js";import{g as M,h as _,i as x}from"./cart-B7sHVmwa.js";import{J as b}from"./just-validate.es-C73wyOde.js";const h=s(".order-list__prods"),m=s(".order-list__total");function $(){F(),y()}function F(){const e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.length!==0&&h&&(h.innerHTML="",e.forEach(a=>{T(a)}))}function T(e){if(!h)return;const a=l("div",["prod",`prod_${e.id}`]),t=l("div","prod__img");e.type==="Vitamins & Dietary Supplements"&&o(t,"add","prod__img_purple"),e.type==="Minerals"&&o(t,"add","prod__img_green-mint"),e.type==="Prenatal Vitamins"&&o(t,"add","prod__img_pink"),e.type==="Pain Relief"&&o(t,"add","prod__img_blue"),e.type==="Antioxidants"&&o(t,"add","prod__img_orange"),e.type==="Weight Loss"&&o(t,"add","prod__img_dark-blue"),(e.type==="Probiotics"||e.type==="Sale%")&&o(t,"add","prod__img_red"),t.innerHTML=`
    <img src="${e.img}" alt="" />
  `;const n=l("div","prod__count-and-name");n.innerText=`${e.counts} x ${e.name}`;const i=l("p","prod__price"),c=M(e.price,e.discount,e.counts),d=_(e.price,e.counts);e.type==="Sale%"?(o(i,"add","prod__price_sale"),i.innerHTML=`<span>$${d}</span> $${c}`):i.innerText=`$${d}`,a.appendChild(t),a.appendChild(n),a.appendChild(i),h.appendChild(a)}function y(){if(!m)return;let e=JSON.parse(localStorage.getItem("cartItems")||"[]"),a=0,t,n=0;const i=l("p","order-list__subtotal"),c=l("p","order-list__shopping"),d=l("p","order-list__discount"),p=l("p","order-list__todays-total"),g=s(".accordion__price");e?.length===0&&(p.innerHTML="Today’s Total: <span>$0</span>"),e.forEach(r=>{r.type==="Sale%"?(t=M(r.price,r.discount,r.counts),n+=parseFloat(_(r.price,r.counts).replace(/,/g,"").replace(/\s/g,""))-parseFloat(M(r.price,r.discount,r.counts).replace(/,/g,"").replace(/\s/g,""))):t=_(r.price,r.counts),a+=parseFloat(t.replace(/,/g,"").replace(/\s/g,""))}),i.innerHTML=`Subtotal <span>$${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,c.innerHTML="Shipping <span>$9.20</span>",m.appendChild(i),m.appendChild(c),n!==0&&(d.innerHTML=`Discount <span>$${n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,m.appendChild(d)),a+=9.2,p.innerHTML=`Today’s Total: <span>$${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,m.appendChild(p),g&&(g.innerText=`$${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`)}const f=s(".accordion"),v=s(".accordion-content");function S(){!f||!v||f.addEventListener("click",()=>{f.classList.toggle("accordion_active"),v.classList.toggle("accordion-content_active")})}const u=s(".header");function q(){C()}function C(){L(),window.addEventListener("scroll",L)}function L(){u&&(window.scrollY>50?(u.style.backgroundColor="white",u.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",u.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(u.style.backgroundColor="transparent",u.style.boxShadow="none"))}function P(){return new Promise(e=>{const a=s("#deliver-info");if(!a){e(!1);return}new b(a,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0}).addField("#first-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#last-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#address-line1",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#address-line2",[{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#city",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Enter a valid city name"}]).addField("#state-hidden",[{rule:"required",errorMessage:"This field is required"}]).addField("#zip",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:3,errorMessage:"Must be at least 3 characters"},{rule:"maxLength",value:10,errorMessage:"Must be less than 10 characters"},{rule:"customRegexp",value:/^\d+$/,errorMessage:"Enter a valid ZIP / Postal Code"}]).addField("#mail",[{rule:"required",errorMessage:"This field is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})$/,errorMessage:"Write correct email"}]).addField("#phone",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:4,errorMessage:"Must be at least 4 characters"},{rule:"maxLength",value:15,errorMessage:"Must be less than 15 characters"},{rule:"customRegexp",value:/^\+?\d+$/,errorMessage:"Enter a valid phone number"}]),document.readyState!=="complete"&&e(!1)})}function D(){return new Promise(e=>{const a=s("#billing"),t=s("#card"),n=s("#expiration"),i=s("#cvc");if(!a||!t||!n||!i){e(!1);return}const c=r=>(r=r.replace(/\D/g,"").slice(0,16),r.replace(/(\d{4})(?=\d)/g,"$1 ").trim()),d=r=>(r=r.replace(/\D/g,"").slice(0,4),r.replace(/(\d{2})(?=\d)/g,"$1/").trim()),p=r=>(r=r.replace(/\D/g,"").slice(0,3),r);t.addEventListener("input",()=>{t.value=c(t.value)}),n.addEventListener("input",()=>{n.value=d(n.value)}),i.addEventListener("input",()=>{i.value=p(i.value)});const g=new b(a,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0});if(g.addField("#card",[{rule:"required",errorMessage:"This field is required"}]).addField("#expiration",[{rule:"required",errorMessage:"This field is required"}]).addField("#cvc",[{rule:"required",errorMessage:"This field is required"}]),document.readyState==="complete"){g.revalidate().then(r=>{e(r)});return}e(!1)})}document.addEventListener("DOMContentLoaded",async()=>{$(),S(),q();const e=s(".deliver-info__subitem_dropdown");e&&(x(e),P(),D())});
