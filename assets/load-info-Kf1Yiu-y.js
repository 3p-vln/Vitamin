import{i as B}from"./dropdown-MNiyI8bl.js";import{j as $}from"./use-api-CoVlJz1c.js";import{g as n,c as a}from"./use-call-dom-8Q8ZjlCD.js";import{c as h}from"./cart-C_Fahts-.js";import{c as H,d as b,r as V}from"./cart-operation-DqXfCHMZ.js";import{i as W}from"./render-cart-BSVPqZQw.js";import"./js.cookie-Cz0CWeBA.js";import"./header-BuGRmcjA.js";const R=new URLSearchParams(window.location.search),w=R.get("id")||void 0,p=n(".autoship__on-off");async function U(t){if(p&&w)try{const e=await $(w);if("errors"in e){console.error(e.errors);return}z(e,t)}catch(e){console.error(e)}}function z(t,e){if(p){if(p.classList.contains("autoship__on-off_active")){if(!JSON.parse(localStorage.getItem("cartItems")||"[]").some(d=>d.id===t.id)){H(t),b(t),h(e);return}b(t),h(e);return}V(t)}}const j=new URLSearchParams(window.location.search),k=j.get("id")||void 0,y=n(".autoship__dropdown"),u=n(".ilustrate"),o=n(".info__category"),l=n(".count__svg svg use"),L=n(".info__name"),P=n(".count__capsules span"),S=n(".count__mg span"),f=n(".autoship__text"),m=n(".add-to-cart__price"),A=n(".descripton__info"),D=n(".safety .inf"),E=n(".indications .inf"),M=n(".ingredients .inf"),C=n(".directions .inf"),F=n(".legal .inf"),q=[u,o,l,L,P,S,f,m,A,D,E,M,C,F],x=n(".count__minus"),T=n(".count__plus"),g=n(".count__items");async function rt(){if(!(!k||!y))try{const t=await $(k);if("errors"in t){console.error(t.errors);return}W(".count__counter"),J(t),O(),G(t),B(y)}catch(t){console.error(t)}}function i(t){if(t)return t}function s(t,e,r){if(t)switch(e){case"innerText":t.textContent=r;break;case"innerHTML":t.innerHTML=r;break}}function J(t){if(q.some(c=>!c))return;switch(t.type){case"Vitamins & Dietary Supplements":a(i(u),"add","ilustrate_purple");break;case"Minerals":a(i(u),"add","ilustrate_green-mint");break;case"Prenatal Vitamins":a(i(u),"add","ilustrate_pink");break;case"Pain Relief":a(i(u),"add","ilustrate_blue");break;case"Antioxidants":a(i(u),"add","ilustrate_orange");break;case"Weight Loss":a(i(u),"add","ilustrate_dark-blue");break;case"Probiotics":a(i(u),"add","ilustrate_red");break;case"Sale%":a(i(u),"add","ilustrate_red");break}const e=n(".ilustrate__content");if(!e)return;switch(e.innerHTML=`
     <picture>
        <source srcset="${t.img.img_webp}" type="image/webp">
        <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}" loading="lazy"/>
     </picture>`,t.type){case"Vitamins & Dietary Supplements":a(i(o),"add","info__category_purple"),i(l)?.setAttribute("href","#can");break;case"Minerals":a(i(o),"add","info__category_green-mint"),i(l)?.setAttribute("href","#bottle");break;case"Prenatal Vitamins":a(i(o),"add","info__category_pink"),i(l)?.setAttribute("href","#kit");break;case"Pain Relief":a(i(o),"add","info__category_blue"),i(l)?.setAttribute("href","#box");break;case"Antioxidants":a(i(o),"add","info__category_orange"),i(l)?.setAttribute("href","#can");break;case"Weight Loss":a(i(o),"add","info__category_dark-blue"),i(l)?.setAttribute("href","#bottle");break;case"Probiotics":a(i(o),"add","info__category_red"),i(l)?.setAttribute("href","#kit");break;case"Sale%":a(i(o),"add","info__category_red"),i(l)?.setAttribute("href","#kit");break}s(o,"innerText",t.type),s(L,"innerText",t.name),s(P,"innerText",t.capsules.toString()),s(S,"innerText",t.weight_mg.toString()),window.innerWidth<768&&s(f,"innerText","Deliver every"),window.addEventListener("resize",()=>{window.innerWidth<768&&s(f,"innerText","Deliver every"),window.innerWidth>=768&&s(f,"innerText","Autoship this item every")});const r=N(t.price,t.discount);t.type==="Sale%"?(a(i(m),"add","add-to-cart__price_sale"),s(m,"innerHTML",`<span><span class="price">$${t.price}</span> <span class="discount">-${t.discount}%</span></span> $${r}`)):s(m,"innerText",`$${t.price}`),Q(i(m),t),s(A,"innerText",t.description),s(D,"innerText",t.satefy_information),s(E,"innerText",t.indications),s(M,"innerText",t.ingradients),s(C,"innerText",t.directions),s(F,"innerText",t.legal_disclaimer)}function O(){const t=n(".info__backbtn");t&&t.addEventListener("click",()=>{window.location.href="/Vitamin/shop.html"})}function G(t){const e=n(".autoship__on-off");if(!e)return;const r=n(".autoship__circle",e);r&&t.disabled_subscribe===!0&&e.addEventListener("click",async c=>{e.classList.toggle("autoship__on-off_active"),r.classList.toggle("autoship__circle_active"),await U(c)})}function N(t,e,r=1){const c=parseFloat(t);if(isNaN(c))throw new Error("Invalid price format");return(c*(1-e/100)*r).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function K(t,e=1){const r=parseFloat(t);if(isNaN(r))throw new Error("Invalid price format");return(r*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Q(t,e){if(!t||!T||!x||!g)return;let r=Number(g.innerText),c="",d="";T.addEventListener("click",()=>{v(r,g,c,d,t,e)}),x.addEventListener("click",()=>{v(r,g,c,d,t,e)})}function v(t,e,r,c,d,_){t=Number(e.innerText),r=K(_.price,t),c=N(_.price,_.discount,t),_.type==="Sale%"?d.innerHTML=`<span>$${r} <span class="discount">-${_.discount}%</span></span> $${c}`:d.innerText=`$${r}`}export{rt as default};
