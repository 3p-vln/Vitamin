import{g as f,r as a,c as n}from"./use-call-dom-DDNnwvp7.js";import{h as u,j as _}from"./cart-Dtr2gyvc.js";import{j as $}from"./use-api-AcE-7l2M.js";import"./dropdown-7a_ekS_C.js";import"./scroll-lock-DIYiYMmB.js";import"./js.cookie-Cz0CWeBA.js";const g=f(".order-list__prods"),l=f(".order-list__total");function I(){y(),T()}function y(){const e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.length!==0&&g&&(g.innerHTML="",e.forEach(r=>{S(r)}))}async function S(e){if(!g)return;const r=a("div",["prod",`prod_${e.id}`]),i=a("div","prod__img");try{const t=await $(`${e.id}`);if("errors"in t){console.error(t.errors);return}t.type==="Vitamins & Dietary Supplements"&&n(i,"add","prod__img_purple"),t.type==="Minerals"&&n(i,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&n(i,"add","prod__img_pink"),t.type==="Pain Relief"&&n(i,"add","prod__img_blue"),t.type==="Antioxidants"&&n(i,"add","prod__img_orange"),t.type==="Weight Loss"&&n(i,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&n(i,"add","prod__img_red"),i.innerHTML=`
        <picture>
           <source srcset="${t.img.img_webp}" type="image/webp">
           <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}" />
        </picture>`;const p=a("div","prod__count-and-name");p.innerText=`${e.counts} x ${t.name}`;const s=a("p","prod__price"),m=u(t.price,t.discount,e.counts),c=_(t.price,e.counts);t.type==="Sale%"?(n(s,"add","prod__price_sale"),s.innerHTML=`<span>$${c}</span> $${m}`):s.innerText=`$${c}`,r.appendChild(i),r.appendChild(p),r.appendChild(s),g.appendChild(r)}catch(t){console.error(t)}}function T(){if(!l)return;let e=JSON.parse(localStorage.getItem("cartItems")||"[]"),r=0,i,t=0;const p=a("p","order-list__subtotal"),s=a("p","order-list__shopping"),m=a("p","order-list__discount"),c=a("p","order-list__todays-total"),h=f(".accordion__price");e?.length===0&&(c.innerHTML="Today’s Total: <span>$0</span>"),e.forEach(async d=>{try{const o=await $(`${d.id}`);if("errors"in o){console.error(o.errors);return}if(o.type==="Sale%"?(i=u(o.price,o.discount,d.counts),t+=parseFloat(_(o.price,d.counts).replace(/,/g,"").replace(/\s/g,""))-parseFloat(u(o.price,o.discount,d.counts).replace(/,/g,"").replace(/\s/g,""))):i=_(o.price,d.counts),r+=parseFloat(i.replace(/,/g,"").replace(/\s/g,"")),p.innerHTML=`Subtotal <span>$${r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(p),t!==0&&(m.innerHTML=`Discount <span class="red">-$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(m)),s.innerHTML="Shipping <span>$9.20</span>",l.appendChild(s),r+=9.2,c.innerHTML=`Today’s Total: <span>$${r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(c),!h)return;h.innerText=`$${r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}catch(o){console.log(o)}})}export{I as default};
