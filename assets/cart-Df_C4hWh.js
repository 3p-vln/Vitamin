import{g as o,a as x,c as g,r as L}from"./use-call-dom-CaqOo_cc.js";import{l as k,t as E}from"./render-cart-D4kgbyJx.js";const h=o(".header__bag"),n=o(".cart"),f=o(".cart__close"),y=o(".cart__bg"),b=o(".cart__items"),e=o(".header"),I=o("html");let P=x(".prod"),d=0,m=!1;const c=o(".info__backbtn");function O(){!h||!f||!y||!b||(h.addEventListener("click",t=>S(t)),f.addEventListener("click",()=>_()),y.addEventListener("click",()=>_()),A())}function S(t){t.stopPropagation(),n&&(g(n,"add","cart_active"),m||(m=!0,k(),E(),P.forEach(i=>{const s=o(".prod__autoship-text",i);s&&W(s)})),c&&(c.style.zIndex="1"),v())}function _(){n&&(g(n,"remove","cart_active"),c&&(c.style.zIndex="25"),v())}function v(){if(!(!e||!I||!n||!b)){if(n.classList.contains("cart_active")){d=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${d}px`,document.body.style.left="0",document.body.style.width="100%",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.backgroundColor="white";const t=B();document.body.style.paddingRight=`${t}px`,e.style.paddingRight=`${t}px`;return}document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.width="",document.body.style.paddingRight="",document.documentElement.style.scrollBehavior="auto",window.scrollTo({top:d,behavior:"instant"}),document.documentElement.style.scrollBehavior="",e.style.top="",e.style.left="",e.style.position="",e.style.backgroundColor="",e.style.paddingRight="0"}}function B(){const t=L("div","");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),i}function W(t){window.innerWidth<768&&(t.innerText="Deliver every")}function A(){const i=new URLSearchParams(window.location.search).get("id"),s=o(".autoship__on-off"),r=o(".autoship__circle");let l=JSON.parse(localStorage.getItem("cartItems")||"[]");if(!i)return;const u=l.findIndex(a=>a.id===Number(i));l[u].autoshipChecked&&(console.log(l[u].autoshipChecked),s?.classList.toggle("autoship__on-off_active"),r?.classList.toggle("autoship__circle_active"));function C(a){if(a.key==="cartItems"){const p=JSON.parse(a.newValue||"[]").find(w=>w.id===Number(i));if(!p)return;p.autoshipChecked?(s?.classList.add("autoship__on-off_active"),r?.classList.add("autoship__circle_active")):(s?.classList.remove("autoship__on-off_active"),r?.classList.remove("autoship__circle_active"))}}window.addEventListener("storage",C)}export{S as c,O as i};
