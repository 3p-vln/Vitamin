import{g as f,r as a,c as o}from"./use-call-dom-DDNnwvp7.js";import{g as u,h as _}from"./cart-DiPG_dLf.js";import{k as h}from"./use-api-BnJ_j2Go.js";import"./dropdown-7a_ekS_C.js";const g=f(".order-list__prods"),l=f(".order-list__total");function F(){y(),T()}function y(){const i=JSON.parse(localStorage.getItem("cartItems")||"[]");i.length!==0&&g&&(g.innerHTML="",i.forEach(e=>{S(e)}))}async function S(i){if(!g)return;const e=a("div",["prod",`prod_${i.id}`]),t=a("div","prod__img");try{const r=await h(`${i.id}`);if("errors"in r){console.error(r.errors);return}r.type==="Vitamins & Dietary Supplements"&&o(t,"add","prod__img_purple"),r.type==="Minerals"&&o(t,"add","prod__img_green-mint"),r.type==="Prenatal Vitamins"&&o(t,"add","prod__img_pink"),r.type==="Pain Relief"&&o(t,"add","prod__img_blue"),r.type==="Antioxidants"&&o(t,"add","prod__img_orange"),r.type==="Weight Loss"&&o(t,"add","prod__img_dark-blue"),(r.type==="Probiotics"||r.type==="Sale%")&&o(t,"add","prod__img_red"),t.innerHTML=`
    <img src="${r.img}" alt="prod" />
  `;const p=a("div","prod__count-and-name");p.innerText=`${i.counts} x ${r.name}`;const s=a("p","prod__price"),m=u(r.price,r.discount,i.counts),c=_(r.price,i.counts);r.type==="Sale%"?(o(s,"add","prod__price_sale"),s.innerHTML=`<span>$${c}</span> $${m}`):s.innerText=`$${c}`,e.appendChild(t),e.appendChild(p),e.appendChild(s),g.appendChild(e)}catch(r){console.error(r)}}function T(){if(!l)return;let i=JSON.parse(localStorage.getItem("cartItems")||"[]"),e=0,t,r=0;const p=a("p","order-list__subtotal"),s=a("p","order-list__shopping"),m=a("p","order-list__discount"),c=a("p","order-list__todays-total"),$=f(".accordion__price");i?.length===0&&(c.innerHTML="Today’s Total: <span>$0</span>"),i.forEach(async d=>{try{const n=await h(`${d.id}`);if("errors"in n){console.error(n.errors);return}if(n.type==="Sale%"?(t=u(n.price,n.discount,d.counts),r+=parseFloat(_(n.price,d.counts).replace(/,/g,"").replace(/\s/g,""))-parseFloat(u(n.price,n.discount,d.counts).replace(/,/g,"").replace(/\s/g,""))):t=_(n.price,d.counts),e+=parseFloat(t.replace(/,/g,"").replace(/\s/g,"")),p.innerHTML=`Subtotal <span>$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(p),r!==0&&(m.innerHTML=`Discount <span class="red">-$${r.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(m)),s.innerHTML="Shipping <span>$9.20</span>",l.appendChild(s),e+=9.2,c.innerHTML=`Today’s Total: <span>$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(c),!$)return;$.innerText=`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}catch(n){console.log(n)}})}export{F as default};
