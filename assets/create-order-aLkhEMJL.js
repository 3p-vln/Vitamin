function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/header-CDqzqvqN.js","assets/use-call-dom-DDNnwvp7.js","assets/order-list-eOHmIhKB.js","assets/cart-DbbPYPQW.js","assets/dropdown-7a_ekS_C.js","assets/use-api-CCINPRot.js","assets/order-accordion-ppYV8cx6.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{u as q,_}from"./lazy-load-Cgk4cJeL.js";import{i as F}from"./dropdown-7a_ekS_C.js";import{g as r}from"./use-call-dom-DDNnwvp7.js";import{J as b}from"./just-validate.es-C73wyOde.js";import{j as y}from"./use-api-CCINPRot.js";import{I as M}from"./index-yFKSUj0c.js";import{s as x,r as O}from"./stopPreload-BW9xUuEZ.js";async function S(){return new Promise(a=>{const n=r("#create-order");if(!n)return;const t=new b(n,{focusInvalidField:!0,lockForm:!1,validateBeforeSubmitting:!0});t.addField("#first-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#last-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#address-line1",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#address-line2",[{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#city",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Enter a valid city name"}]).addField("#state",[{rule:"required",errorMessage:"This field is required"}]).addField("#zip",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:3,errorMessage:"Must be at least 3 characters"},{rule:"maxLength",value:10,errorMessage:"Must be less than 10 characters"},{rule:"customRegexp",value:/^\d+$/,errorMessage:"Enter a valid ZIP / Postal Code"}]).addField("#mail",[{rule:"required",errorMessage:"This field is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})$/,errorMessage:"Write correct email"}]).addField("#phone",[{rule:"required",errorMessage:"This field is required"},{rule:"maxLength",value:19,errorMessage:"Must be less than 13 characters"}]).addField("#card",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:19,errorMessage:"Must be at least 16 characters"}]).addField("#expiration",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:5,errorMessage:"Must be at least 4 characters"}]).addField("#cvc",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:3,errorMessage:"Must be at least 3 characters"}]),t.validate(),t.onSuccess(()=>a(!0)),t.onFail(()=>a(!1))})}const I=r(".create-order-form__btn"),L=r(".order-list__btn"),e=JSON.parse(localStorage.getItem("userInfo")||"null"),s=JSON.parse(localStorage.getItem("orderInfo")||"null"),d=r("#first-name"),c=r("#last-name"),m=r("#address-line1"),v=r("#address-line2"),g=r("#city"),f=r("#state"),p=r("#zip"),h=r("#mail"),o=r("#phone"),l=r("#card"),i=r("#expiration"),u=r("#cvc");async function T(){!I||!L||(N(),E(),L.addEventListener("click",()=>{I.click()}),I.addEventListener("click",async()=>{await S()&&(k(),w())}))}function w(){e||(localStorage.removeItem("cartItems"),window.location.href="/Vitamin/successful-order.html");const a=JSON.parse(localStorage.getItem("cartItems")||"[]");if(a.length===0){console.log("Cart is empty!");return}console.log(e);const n={order:a.map(t=>({product_id:t.id,quantity:t.counts})),user_id:e.user_id};try{y(n).then(t=>{console.log("Order created successfully:",t),localStorage.removeItem("cartItems"),window.location.href="/Vitamin/successful-order.html"})}catch(t){console.error(t)}}function E(){!l||!i||!u||!o||(M(l,{mask:"0000-0000-0000-0000"}),M(i,{mask:"00/00"}),M(u,{mask:"000"}),M(o,{mask:"+000 (00) 00 00 000"}))}function k(){if(!d||!c||!m||!v||!g||!f||!p||!h||!o||!l||!i||!u)return;const a={firstName:d.value,lastName:c.value,addressFirst:m.value,addressSecond:v.value,city:g.value,state:f.value,zip:p.value,email:h.value,phone:o.value,card:l.value,date:i.value,cvc:u.value};console.log("Order created:",a),localStorage.setItem("orderInfo",JSON.stringify(a))}function N(){if(!(!d||!c||!m||!v||!g||!f||!p||!h||!o||!l||!i||!u)&&!(!e&&s)){if(s&&!e){d.value=s.firstName,c.value=s.lastName,m.value=s.addressFirst,v.value=s.addressSecond,g.value=s.city,f.value=s.state,p.value=s.zip,h.value=s.email,o.value=s.phone,l.value=s.card,i.value=s.expiration,u.value=s.cvc;return}if(e){console.log(e),d.value=e.first_name,c.value=e.last_name,m.value=e.address_one,v.value=e.address_two,g.value=e.city,f.value=e.state_province,p.value=e.postal_code,h.value=e.email,o.value=e.phone,l.value=e.card_info.card_number,i.value=e.card_info.card_date,u.value=e.card_info.card_cvv;return}}}const R=[{importFn:()=>_(()=>import("./header-CDqzqvqN.js"),__vite__mapDeps([0,1])),selector:".header"},{importFn:()=>_(()=>import("./order-list-eOHmIhKB.js"),__vite__mapDeps([2,1,3,4,5])),selector:".order-list__prods"},{importFn:()=>_(()=>import("./order-accordion-ppYV8cx6.js"),__vite__mapDeps([6,1])),selector:".accordion"}];R.forEach(({importFn:a,selector:n})=>q(a,n));document.addEventListener("DOMContentLoaded",async()=>{const a=r(".deliver-info__subitem_dropdown");a&&(F(a),await T(),x())});O();
