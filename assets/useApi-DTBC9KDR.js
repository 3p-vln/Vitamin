import{g as n}from"./useCallDom-DDNnwvp7.js";import{a as w,b as v,A as L}from"./index-wYSWI2m-.js";function $(){const t=document.querySelectorAll(".header__user-name"),e=localStorage.getItem("userInfo");if(t&&e){const s=JSON.parse(e);t.forEach(o=>{const r=o;r.innerText=`${s.first_name} ${s.last_name}`})}}function k(){document.querySelectorAll(".sign-out").forEach(e=>{e.addEventListener("click",()=>{localStorage.removeItem("userInfo"),w.remove("accessToken",{path:"/"}),w.remove("refreshToken",{path:"/"}),window.location.href="/Vitamin"})})}const p=n(".burger__btn"),c=n(".burger__menu.main"),d=n(".header__bag"),m=n(".header__logo"),f=n(".pack-info__bg_hulf-circle"),i=n(".header");function U(){if(!c)return;const t=n(".menu__item_shop",c),e=n(".menu__item_info",c),s=n(".header__profile",c),o=n(".burger__menu.shop"),r=n(".burger__menu.info"),a=n(".burger__menu.profile");E(),p&&t&&o&&e&&r&&s&&a&&(g("burger__btn","main"),g("menu__item_shop","shop"),g("menu__item_info","info"),g("header__profile_adapt","profile"),_("shop__title","shop"),_("info__title","info"),_("profile__title","profile")),$(),k()}function g(t,e){if(t){const s=n(`.${t}`),o=n(`.${e}`);if(s&&o){s.addEventListener("click",()=>{const r=!o.classList.contains(`${e}_active`);if(o.classList.contains("main")){o.classList.toggle(`${e}_active`),s.classList.toggle(`${t}_active`),x(),B(),h(o,r);return}o.classList.add(`${e}_active`),h(o,r)});return}}}function _(t,e){if(t){const s=n(`.${t} .back-btn`),o=n(`.${e}`);if(s&&o){s.addEventListener("click",()=>{const r=!o.classList.contains(`${e}_active`);o.classList.remove(`${e}_active`),h(o,r)});return}}}function x(){if(d&&m&&c){if(c.classList.contains("main_active")){m.style.opacity="0",d.style.display="none",f&&(f.style.display="none");return}f&&(f.style.display="block"),m.style.opacity="1",d.style.display="block"}}function B(){if(!p)return;const t=n("body");if(t&&i){if(p.classList.contains("burger__btn_active")){t.style.overflow="hidden";return}t.style.overflow="auto",i.style.backgroundColor="white"}}function E(){i&&window.addEventListener("scroll",()=>{window.scrollY>50?(i.style.backgroundColor="white",i.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",i.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(i.style.backgroundColor="transparent",i.style.boxShadow="none")})}function h(t,e){function o(a){return a<.5?2*a*a:-1+(4-2*a)*a}function r(a){const u=e?a:1-a;t.style.height=`${u*100}vh`,t.style.opacity=`${u}`}e&&(t.style.visibility="visible"),I({timing:o,draw:r,duration:300}),e||setTimeout(()=>{t.style.visibility="hidden",t.style.height="0"},300)}function I({timing:t,draw:e,duration:s}){let o=performance.now();requestAnimationFrame(function r(a){let l=(a-o)/s;l>1&&(l=1);let u=t(l);e(u),l<1&&requestAnimationFrame(r)})}const S="https://www.mku-journal.online",b=v.create({baseURL:S,headers:{"Content-Type":"application/json"}}),y=async t=>{try{return(await t).data}catch(e){return e instanceof L?(console.error("API error:",e.response?.data||e.message),{errors:[{message:e.response?.data?.message||e.message}]}):e instanceof Error?(console.error("General error:",e.message),{errors:[{message:e.message}]}):(console.error("Unknown error:",e),{errors:[{message:"An unexpected error occurred."}]})}},q=(t,e,s)=>y(b.get("/catalog/all-list",{params:{type:s,page:t,limit:e}})),A=t=>y(b.get(`/catalog/${t}/info`)),M=t=>y(b.get(`${t?"/catalog/recommendations?is_main=true":"/catalog/recommendations"}`));export{A as a,q as b,M as g,U as i};
