import{g as n}from"./use-call-dom-CaqOo_cc.js";/* empty css              */import"./check-auth-CB7tDQ7V.js";import{J as t}from"./just-validate.es-C73wyOde.js";import{a}from"./js.cookie-Cz0CWeBA.js";import{l as i,a as l}from"./use-api-Bg0RsZwB.js";async function g(o){const r=await i(o);if(console.log(o),console.log(0),r.accessToken){a.set("refreshToken",r.refreshToken,{path:"/"}),a.set("accessToken",r.accessToken,{path:"/"});const e=await l();"email"in e&&(localStorage.setItem("userInfo",JSON.stringify(e)),window.location.href="/Vitamin")}if("message"in r.errors[0]){console.log(1);const e=n(".login-form__error-message");if(!e)return;switch(console.log(2),r.errors[0].message){case"Не правильний пароль":e.innerHTML="Wrong password",console.log(3);break;case"Користувач не знайдений":e.innerHTML="Wrong email",console.log(4);break;default:e.innerHTML="Error, try again later"}}}function m(){new t("#login-form").addField("#regular-login-email",[{rule:"required",errorMessage:"Email is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9а-яА-Я."_%+-]+@[a-zA-Zа-яА-Я0-9-.]+\.[a-zA-Zа-яА-Я]{2,}$/u,errorMessage:"Enter a valid email address!"}]).addField("#login-password",[{rule:"required",errorMessage:"Password is required"},{rule:"minLength",value:8,errorMessage:"Password must be at least 8 characters long"},{rule:"maxLength",value:30,errorMessage:"Password must be less than 30 characters"}]).onSuccess(async()=>{const r=document.getElementById("login-form");if(!(r instanceof HTMLFormElement))return;const e=new FormData(r),s={email:e.get("email").toString(),password:e.get("password").toString()};await g(s)})}document.addEventListener("DOMContentLoaded",async()=>{m()});
