import{g as _,r as o,c as n}from"./use-call-dom-8Q8ZjlCD.js";import{i as h}from"./use-api-f8EgvG8W.js";import{g as $,a as u}from"./render-cart-BsRNV-7U.js";import"./js.cookie-Cz0CWeBA.js";import"./dropdown-MNiyI8bl.js";const g=_(".order-list__prods-container"),l=_(".order-list__total");function x(){S(),P()}function S(){const r=JSON.parse(localStorage.getItem("cartItems")||"[]");r.length!==0&&g&&(g.innerHTML="",r.forEach(async e=>{await T(e)}))}async function T(r){if(!g)return;const e=o("div",["prod",`prod_${r.id}`]),i=o("div","prod__img");try{const t=await h(`${r.id}`);t.type==="Vitamins & Dietary Supplements"&&n(i,"add","prod__img_purple"),t.type==="Minerals"&&n(i,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&n(i,"add","prod__img_pink"),t.type==="Pain Relief"&&n(i,"add","prod__img_blue"),t.type==="Antioxidants"&&n(i,"add","prod__img_orange"),t.type==="Weight Loss"&&n(i,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&n(i,"add","prod__img_red"),i.innerHTML=`
        <picture>
           <source srcset="${t.img.img_webp}" type="image/webp">
           <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}" />
        </picture>`;const p=o("div","prod__count-and-name");p.innerText=`${r.counts} x ${t.name}`;const a=o("p","prod__price"),m=$(t.price,t.discount,r.counts),s=u(t.price,r.counts);t.type==="Sale%"?(n(a,"add","prod__price_sale"),a.innerHTML=`<span>$${s}</span> $${m}`):a.innerText=`$${s}`,e.appendChild(i),e.appendChild(p),e.appendChild(a),g.appendChild(e)}catch(t){console.error(t)}}async function P(){if(!l)return;let r=JSON.parse(localStorage.getItem("cartItems")||"[]"),e=0,i,t=0;const p=o("p","order-list__subtotal"),a=o("p","order-list__shopping"),m=o("p","order-list__discount"),s=o("p","order-list__todays-total"),f=_(".accordion__price");r?.length===0&&(s.innerHTML="Today’s Total: <span>$0</span>");try{for(const c of r){const d=await h(`${c.id}`);if(d.type==="Sale%"){i=parseFloat(u(d.price,c.counts).replace(/,/g,"").replace(/\s/g,""));const y=parseFloat($(d.price,d.discount,c.counts).replace(/,/g,"").replace(/\s/g,""));t+=i-y,e+=Math.round(i*100)/100}else i=parseFloat(u(d.price,c.counts).replace(/,/g,"").replace(/\s/g,"")),e+=Math.round(i*100)/100}if(p.innerHTML=`Subtotal <span>$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(p),t!==0&&(m.innerHTML=`Discount <span class="red">-$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(m),e-=t),a.innerHTML="Shipping <span>$9.20</span>",l.appendChild(a),e+=9.2,s.innerHTML=`Today’s Total: <span>$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(s),!f)return;f.innerText=`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}catch(c){console.error(c)}}export{x as default};
