import{g as r,a as g,c as a,r as d}from"./use-call-dom-DDNnwvp7.js";async function U(t){let e=null;if(typeof t=="string"?e=r(t):e=t,!e)return;const n=r(".counter__plus",e),i=r(".counter__minus",e),o=r(".counter__items",e);let s=Number(o?.innerText);!o||!n||!i||(w(n,i,s),i.addEventListener("click",()=>{Y(o,s),s=Number(o?.innerText),w(n,i,s)}),n.addEventListener("click",()=>{z(o,s),s=Number(o?.innerText),w(n,i,s)}),T(o,s))}function T(t,e){t.textContent=e.toString()}function Y(t,e){e>1&&(e--,T(t,e))}function z(t,e){e<999&&(e++,T(t,e))}function w(t,e,n){n!==999&&n!==1&&(t.style.opacity="1",e.style.opacity="1"),n===999&&(t.style.opacity="0.3"),n===1&&(e.style.opacity="0.3")}function V(t){const e=r(".dropdown",t),n=r(".dropdown__box",t),i=r(".dropdown__text",t),o=r(".dropdown__list",t),s=g(".dropdown__item",t);!e||!n||!i||!o||!s||(e.addEventListener("click",c=>M(c,n,o)),s.forEach(c=>{c.addEventListener("click",()=>q(c,i,n,o))}),document.addEventListener("click",c=>G(c,e,o,n)))}function M(t,e,n){t.stopPropagation(),e&&(e.classList.toggle("dropdown__box_active"),n&&n.classList.toggle("dropdown__list_active"))}function j(t,e){t&&(a(t,"remove","dropdown__box_active"),e&&a(e,"remove","dropdown__list_active"))}function q(t,e,n,i){const o=t.textContent;if(o&&e){if(e.tagName.toLowerCase()==="p"&&(e.textContent=o),e.tagName.toLowerCase()==="input"){e.value=o;const s=r("#state-hidden");if(!s)return;s.value=o}M(event,n,i)}}function G(t,e,n,i){e&&n&&!e.contains(t.target)&&!n.contains(t.target)&&j(i,n)}const P=r(".header__bag"),m=r(".cart"),B=r(".cart__close"),O=r(".cart__bg"),p=r(".cart__items"),A=JSON.parse(localStorage.getItem("userInfo")||"[]");let v=g(".prod"),l;const C=r(".info__backbtn");async function it(){!P||!B||!O||!p||(P.addEventListener("click",t=>{K(t),S()}),B.addEventListener("click",()=>{F(),S()}),W(),_(),v.forEach(t=>{const e=r(".prod__autoship-text",t);e&&Z(e)}),O.addEventListener("click",()=>{F(),S()}))}function K(t){t.stopPropagation(),m&&(a(m,"add","cart_active"),C&&(C.style.zIndex="1"))}function F(){m&&(a(m,"remove","cart_active"),C&&(C.style.zIndex="25"))}function Q(t){v&&v.forEach(e=>{const n=r(".prod__close",e);n&&n.addEventListener("click",()=>{e.remove(),X(t)})})}function X(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");if(e=e.filter(n=>n.id!==t),localStorage.setItem("cartItems",JSON.stringify(e)),_(),e.length===0){if(r(".cart__empty"))return;l=!0,h(l),_();return}}function S(){if(!m)return;const t=r("body"),e=r("header");if(!t||!e)return;const n=window.innerWidth-document.documentElement.clientWidth,i=window.scrollY,o=r(".info__backbtn");if(m.classList.contains("cart_active")){t.style.position="fixed",t.style.top=`-${i}px`,t.style.left="0",t.style.width="100%",t.style.overflow="hidden",t.style.paddingRight=`${n}px`,e.style.paddingRight=`${n}px`,i>50&&o&&(o.style.opacity="0");return}const s=Math.abs(parseInt(t.style.top,10))||0;t.style.position="",t.style.top="",t.style.left="",t.style.width="",t.style.overflow="",t.style.paddingRight="",e.style.paddingRight="",o&&(o.style.opacity=""),window.scrollTo(0,s)}function Z(t){window.innerWidth<768&&(t.innerText="Deliver every")}function E(t,e=!1,n="30",i=1){if(!p)return;const o=d("div",["cart__item","prod",`prod_${t.id}`]),s=d("div","prod__img");t.type==="Vitamins & Dietary Supplements"&&a(s,"add","prod__img_purple"),t.type==="Minerals"&&a(s,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&a(s,"add","prod__img_pink"),t.type==="Pain Relief"&&a(s,"add","prod__img_blue"),t.type==="Antioxidants"&&a(s,"add","prod__img_orange"),t.type==="Weight Loss"&&a(s,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&a(s,"add","prod__img_red"),s.innerHTML=`
    <img src="${t.img}" alt="" />
  `;const c=d("div","prod__info"),u=d("div","prod__title-and-close"),y=d("p","prod__title");y.innerText=t.name;const x=d("div","prod__close");x.innerHTML=`
    <span></span>
    <span></span>
  `;const I=d("div","prod__counter-and-price"),k=d("div","prod__counter");k.innerHTML=`
    <button class="counter__minus">
      <svg>
        <use href="#minus"></use>
      </svg>
    </button>
    <p class="counter__items">${i}</p>
    <button class="counter__plus">
      <svg>
        <use href="#plus"></use>
      </svg>
    </button>
  `,U(k);const b=d("p","prod__price"),R=L(t.price,t.discount,i),D=N(t.price,i);t.type==="Sale%"?(a(b,"add","prod__price_sale"),b.innerHTML=`<span>$${D}</span> $${R}`):b.innerText=`$${D}`;const $=d("div","prod__autoship");$.innerHTML=`
    <div class="prod__checkbox">
      <input type="checkbox" name="autoship" ${e?"checked":""}/>
      <span></span>
    </div>
    <p class="prod__autoship-text">Autoship every</p>
    <div class="dropdown">
      <div class="dropdown__box">
        <p class="dropdown__text">${n}</p>
        <div class="dropdown__arrow">
          <svg>
            <use href="#back-arrow"></use>
          </svg>
        </div>
      </div>
      <div class="dropdown__list">
        <button class="dropdown__item">10</button>
        <button class="dropdown__item">20</button>
        <button class="dropdown__item">30</button>
        <button class="dropdown__item">40</button>
        <button class="dropdown__item">50</button>
        <button class="dropdown__item">60</button>
      </div>
    </div>
    days
  `,V($),u.appendChild(y),u.appendChild(x),I.appendChild(k),I.appendChild(b),c.appendChild(u),c.appendChild(I),c.appendChild($),o.appendChild(s),o.appendChild(c),p.appendChild(o),l=!1,h(l),tt(t),v=g(".prod"),Q(t.id),H(t)}function L(t,e,n){const i=parseFloat(t);if(isNaN(i))throw new Error("Invalid price format");return(i*(1-e/100)*n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function N(t,e){const n=parseFloat(t);if(isNaN(n))throw new Error("Invalid price format");return(n*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function tt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");const n=e.some(u=>u.id===t.id),i=r(".autoship__on-off"),o=r(".count__items");if(!i||!o)return;const s=i.classList.contains("autoship__on-off_active")||!1,c=Number(o.innerText);n||e.push({...t,autoshipChecked:s,autoshipDays:"30",counts:c}),localStorage.setItem("cartItems",JSON.stringify(e))}function H(t){const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),i=g(`.prod_${t.id} .dropdown__item`),o=r(`.prod_${t.id} .counter__minus`),s=r(`.prod_${t.id} .counter__plus`),c=r(`.prod_${t.id} .counter__items`);!e||!n||!i||!o||!s||!c||(e&&e.addEventListener("change",()=>{f(`${t.id}`,e.checked,n.textContent||"30",Number(c.textContent))}),n&&i.forEach(u=>{u.addEventListener("click",y=>{const x=y.target.textContent||"30";f(`${t.id}`,e.checked,x,Number(c.textContent))})}),o.addEventListener("click",()=>{J(t,Number(c.textContent)),f(`${t.id}`,e.checked,n.textContent||"30",Number(c.textContent)),_()}),s.addEventListener("click",()=>{J(t,Number(c.textContent)),f(`${t.id}`,e.checked,n.textContent||"30",Number(c.textContent)),_()}))}function J(t,e){const n=L(t.price,t.discount,e),i=N(t.price,e),o=r(`.prod_${t.id} .prod__price`);o&&(t.type==="Sale%"?o.innerHTML=`<span>$${i}</span> $${n}`:o.innerText=`$${i}`)}function f(t,e,n,i){let o=JSON.parse(localStorage.getItem("cartItems")||"[]");const s=o.findIndex(c=>c.id===Number(t));s!==-1&&(o[s].autoshipChecked=e,o[s].autoshipDays=n,o[s].counts=i),localStorage.setItem("cartItems",JSON.stringify(o))}function W(){const t=JSON.parse(localStorage.getItem("cartItems")||"[]");if(t.length===0){l=!0,h(l);return}l=!1,h(l),p&&(p.innerHTML="",t.forEach(e=>{E(e,e.autoshipChecked,e.autoshipDays,e.counts),H(e)}))}function ot(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.length===0&&(l=!0,h(l)),e.some(i=>i.id===t.id)||E(t),_()}function rt(t){if(!t.disabled_subscribe)return;const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),i=r(".autoship__dropdown .dropdown__text");if(!i)return;const o=i.textContent,s=r(`.prod_${t.id} .counter__items`);!e||!n||!o||!s||(e.checked=!0,n.innerText=o,f(`${t.id}`,e.checked,n.textContent||"30",Number(s.textContent)))}function st(t){if(!t.disabled_subscribe)return;const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),i=r(`.prod_${t.id} .counter__items`);!e||!n||!i||(e.checked=!1,f(`${t.id}`,e.checked,n.textContent||"30",Number(i.textContent)))}function ct(t){const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),i=r(`.prod_${t.id} .counter__items`),o=r(".count__counter .counter__items");let s=JSON.parse(localStorage.getItem("cartItems")||"[]");s.length===0&&(l=!0,h(l));const c=s.some(u=>u.id===t.id);if(o){if(!c){E(t,!1,"30",Number(o.innerText)),_();return}!e||!n||!i||(f(`${t.id}`,e.checked,n.textContent||"30",Number(i.textContent)+Number(o.innerText)),W(),_())}}function h(t){if(p&&(t||(a(p,"remove","empty"),g(".cart__empty").forEach(n=>n.remove())),t)){const e=d("p","cart__empty");e.innerText="Your cart is empty",a(p,"add","empty"),p.appendChild(e)}}function _(){let t=JSON.parse(localStorage.getItem("cartItems")||"[]"),e=0,n;const i=r("#total-cart-price");i&&(t?.length===0&&(i.innerText="$0"),t.forEach(o=>{o.type==="Sale%"?n=L(o.price,o.discount,o.counts):n=N(o.price,o.counts),e+=parseFloat(n.replace(/,/g,"").replace(/\s/g,""))}),i.innerText=`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,et(e))}function et(t){const e=r(".cart__btn");if(!e)return;const n=r(".btn",e);if(!(!A||!n)&&A.role_type==="whosale"){n.style.backgroundColor="#C3BDB6",n.style.pointerEvents="none";const i=d("p","cart__limit");i.style.marginTop="15px",i.style.textAlign="center",i.style.opacity="0.5",i.style.fontSize="14px",i.style.fontWeight="400",i.innerText="Minimum order amount is $700",r(".cart__limit")||e.appendChild(i),t>=700&&(n.style.backgroundColor="",n.style.pointerEvents="")}}export{ct as a,ot as b,K as c,rt as d,U as e,it as f,L as g,N as h,V as i,st as r};
