import{g as i,a as $,c,r as u}from"./useCallDom-DDNnwvp7.js";import{a as H,b as K,A as Q}from"./index-wYSWI2m-.js";function X(){const t=document.querySelectorAll(".header__user-name"),e=localStorage.getItem("userInfo");if(t&&e){const n=JSON.parse(e);t.forEach(o=>{const r=o;r.innerText=`${n.first_name} ${n.last_name}`})}}async function Z(t){let e=null;if(typeof t=="string"?e=i(t):e=t,!e)return;const n=i(".counter__plus",e),o=i(".counter__minus",e),r=i(".counter__items",e);let s=Number(r?.innerText);!r||!n||!o||(I(n,o,s),o.addEventListener("click",()=>{s=Number(r?.innerText),tt(r,s),I(n,o,s)}),n.addEventListener("click",()=>{s=Number(r?.innerText),et(r,s),I(n,o,s)}),D(r,s))}function D(t,e){t.textContent=e.toString()}function tt(t,e){e>1&&(e--,D(t,e))}function et(t,e){e<999&&(e++,D(t,e))}function I(t,e,n){n<999&&n>1&&(t.style.opacity="1",e.style.opacity="1"),n===999&&(t.style.opacity="0.3"),n===1&&(e.style.opacity="0.3")}function nt(t){const e=i(".dropdown",t),n=i(".dropdown__box",t),o=i(".dropdown__text",t),r=i(".dropdown__list",t),s=$(".dropdown__item",t);!e||!n||!o||!r||!s||(e.addEventListener("click",a=>V(a,n,r)),s.forEach(a=>{a.addEventListener("click",()=>it(a,o,n,r))}),document.addEventListener("click",a=>rt(a,e,r,n)))}function V(t,e,n){t.stopPropagation(),e&&(e.classList.toggle("dropdown__box_active"),n&&n.classList.toggle("dropdown__list_active"))}function ot(t,e){t&&(c(t,"remove","dropdown__box_active"),e&&c(e,"remove","dropdown__list_active"))}function it(t,e,n,o){const r=t.textContent;r&&e&&(e.textContent=r,V(event,n,o))}function rt(t,e,n,o){e&&n&&!e.contains(t.target)&&!n.contains(t.target)&&ot(o,n)}const J=i(".header__bag"),f=i(".cart"),U=i(".cart__close"),F=i(".cart__bg");let y=$(".prod");const v=i(".info__backbtn");async function st(){!J||!U||!F||(J.addEventListener("click",t=>{at(t),L()}),U.addEventListener("click",()=>{R(),L()}),_t(),y.forEach(t=>{const e=i(".prod__autoship-text",t);e&&ut(e)}),F.addEventListener("click",()=>{R(),L()}))}function at(t){t.stopPropagation(),f&&(c(f,"add","cart_active"),v&&(v.style.zIndex="1"))}function R(){f&&(c(f,"remove","cart_active"),v&&(v.style.zIndex="25"))}function ct(t){y&&y.forEach(e=>{const n=i(".prod__close",e);n&&n.addEventListener("click",()=>{e.remove(),dt(t)})})}function dt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");e=e.filter(n=>n.id!==t),localStorage.setItem("cartItems",JSON.stringify(e))}function L(){if(!f)return;const t=i("body");if(t){if(f.classList.contains("cart_active")){t.style.overflow="hidden";return}t.style.overflow="auto"}}function ut(t){window.innerWidth<768&&(t.innerText="Deliver every")}function j(t,e=!1,n="30",o=1){const r=i(".cart__items");if(!r)return;const s=u("div",["cart__item","prod",`prod_${t.id}`]),a=u("div","prod__img");t.type==="Vitamins & Dietary Supplements"&&c(a,"add","prod__img_purple"),t.type==="Minerals"&&c(a,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&c(a,"add","prod__img_pink"),t.type==="Pain Relief"&&c(a,"add","prod__img_blue"),t.type==="Antioxidants"&&c(a,"add","prod__img_orange"),t.type==="Weight Loss"&&c(a,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&c(a,"add","prod__img_red"),a.innerHTML=`
    <img src="${t.img}" alt="" />
  `;const d=u("div","prod__info"),m=u("div","prod__title-and-close"),g=u("p","prod__title");g.innerText=t.name;const M=u("div","prod__close");M.innerHTML=`
    <span></span>
    <span></span>
  `;const k=u("div","prod__counter-and-price"),C=u("div","prod__counter");C.innerHTML=`
    <button class="counter__minus">
      <svg>
        <use href="#minus"></use>
      </svg>
    </button>
    <p class="counter__items">${o}</p>
    <button class="counter__plus">
      <svg>
        <use href="#plus"></use>
      </svg>
    </button>
  `,Z(C);const h=u("p","prod__price"),Y=z(t.price,t.discount,o),O=W(t.price,o);t.type==="Sale%"?(c(h,"add","prod__price_sale"),h.innerHTML=`<span>$${O}</span> $${Y}`):h.innerText=`$${O}`;const w=u("div","prod__autoship");w.innerHTML=`
    <div class="prod__checkbox">
      <input type="checkbox" name="autoship" ${e?"checked":""}/>
      <span></span>
    </div>
    <p class="prod__autoship-text">Autoship every</p>
    <div class="dropdown">
      <div class="dropdown__box">
        <p class="dropdown__text">${n}</p>
        <div class="dropdown__arrow">
          <svg>
            <use href="#back-arrow"></use>
          </svg>
        </div>
      </div>
      <div class="dropdown__list">
        <button class="dropdown__item">10</button>
        <button class="dropdown__item">20</button>
        <button class="dropdown__item">30</button>
        <button class="dropdown__item">40</button>
        <button class="dropdown__item">50</button>
        <button class="dropdown__item">60</button>
      </div>
    </div>
    days
  `,nt(w),m.appendChild(g),m.appendChild(M),k.appendChild(C),k.appendChild(h),d.appendChild(m),d.appendChild(k),d.appendChild(w),s.appendChild(a),s.appendChild(d),r.appendChild(s),lt(t),y=$(`.prod_${t.id}`),ct(t.id),G(t)}function z(t,e,n){const o=parseFloat(t);if(isNaN(o))throw new Error("Invalid price format");return(o*(1-e/100)*n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function W(t,e){const n=parseFloat(t);if(isNaN(n))throw new Error("Invalid price format");return(n*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function lt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.some(o=>o.id===t.id)||e.push({...t,autoshipChecked:!0,autoshipDays:"30",counts:1}),localStorage.setItem("cartItems",JSON.stringify(e))}function G(t){const e=i(`.prod_${t.id} .prod__checkbox input`),n=i(`.prod_${t.id} .dropdown__text`),o=$(`.prod_${t.id} .dropdown__item`),r=i(`.prod_${t.id} .counter__minus`),s=i(`.prod_${t.id} .counter__plus`),a=i(`.prod_${t.id} .counter__items`);e&&e.addEventListener("change",()=>{_(`${t.id}`,e.checked,n?.textContent||"30",Number(a?.textContent))}),n&&o.forEach(d=>{d.addEventListener("click",m=>{const g=m.target.textContent||"30";_(`${t.id}`,e?.checked,g,Number(a?.textContent))})}),!(!r||!s||!a)&&(r.addEventListener("click",()=>{a.textContent=a.textContent,q(t,Number(a.textContent)),_(`${t.id}`,e.checked,n?.textContent||"30",Number(a.textContent))}),s.addEventListener("click",()=>{a.textContent=a.textContent,q(t,Number(a.textContent)),_(`${t.id}`,e.checked,n?.textContent||"30",Number(a.textContent))}))}function q(t,e){const n=z(t.price,t.discount,e),o=W(t.price,e),r=i(`.prod_${t.id} .prod__price`);r&&(t.type==="Sale%"?r.innerHTML=`<span>$${o}</span> $${n}`:r.innerText=`$${o}`)}function _(t,e,n,o){let r=JSON.parse(localStorage.getItem("cartItems")||"[]");const s=r.findIndex(a=>a.id===Number(t));s!==-1&&(r[s].autoshipChecked=e,r[s].autoshipDays=n,r[s].counts=o,localStorage.setItem("cartItems",JSON.stringify(r)))}function _t(){JSON.parse(localStorage.getItem("cartItems")||"[]").forEach(e=>{j(e,e.autoshipChecked,e.autoshipDays,e.counts),G(e)})}function vt(t){JSON.parse(localStorage.getItem("cartItems")||"[]").some(o=>o.id===t.id)||j(t)}function $t(t){if(!t.disabled_subscribe)return;const e=i(`.prod_${t.id} .prod__checkbox input`),n=i(`.prod_${t.id} .dropdown__text`),o=i(".autoship__dropdown .dropdown__text")?.textContent,r=i(`.prod_${t.id} .counter__items`);e&&n&&o&&(e.checked=!0,n.innerText=o),_(`${t.id}`,e.checked,n?.textContent||"30",Number(r?.textContent))}function kt(t){if(!t.disabled_subscribe)return;const e=i(`.prod_${t.id} .prod__checkbox input`),n=i(`.prod_${t.id} .dropdown__text`),o=i(`.prod_${t.id} .counter__items`);e&&(e.checked=!1),_(`${t.id}`,e.checked,n?.textContent||"30",Number(o?.textContent))}function Ct(t){const e=i(`.prod_${t.id} .prod__checkbox input`),n=i(`.prod_${t.id} .dropdown__text`),o=i(`.prod_${t.id} .counter__items`),r=i(".count__counter .counter__items");!r||!o||(o.innerText=(Number(o.textContent)+Number(r.innerText)).toString(),_(`${t.id}`,e.checked,n?.textContent||"30",Number(o.innerText)))}function pt(){document.querySelectorAll(".sign-out").forEach(e=>{e.addEventListener("click",()=>{localStorage.removeItem("userInfo"),H.remove("accessToken",{path:"/"}),H.remove("refreshToken",{path:"/"}),window.location.href="/Vitamin"})})}const N=i(".burger__btn"),p=i(".burger__menu.main"),S=i(".header__bag"),E=i(".header__logo"),b=i(".pack-info__bg_hulf-circle"),l=i(".header");function wt(){if(!p)return;const t=i(".menu__item_shop",p),e=i(".menu__item_info",p),n=i(".header__profile",p),o=i(".burger__menu.shop"),r=i(".burger__menu.info"),s=i(".burger__menu.profile");gt(),N&&t&&o&&e&&r&&n&&s&&(x("burger__btn","main"),x("menu__item_shop","shop"),x("menu__item_info","info"),x("header__profile_adapt","profile"),T("shop__title","shop"),T("info__title","info"),T("profile__title","profile")),X(),st(),pt()}function x(t,e){if(t){const n=i(`.${t}`),o=i(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const r=!o.classList.contains(`${e}_active`);if(o.classList.contains("main")){o.classList.toggle(`${e}_active`),n.classList.toggle(`${t}_active`),ft(),mt(),P(o,r);return}o.classList.add(`${e}_active`),P(o,r)});return}}}function T(t,e){if(t){const n=i(`.${t} .back-btn`),o=i(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const r=!o.classList.contains(`${e}_active`);o.classList.remove(`${e}_active`),P(o,r)});return}}}function ft(){if(S&&E&&p){if(p.classList.contains("main_active")){E.style.opacity="0",S.style.display="none",b&&(b.style.display="none");return}b&&(b.style.display="block"),E.style.opacity="1",S.style.display="block"}}function mt(){if(!N)return;const t=i("body");if(t&&l){if(N.classList.contains("burger__btn_active")){t.style.overflow="hidden";return}t.style.overflow="auto",l.style.backgroundColor="white"}}function gt(){l&&window.addEventListener("scroll",()=>{window.scrollY>50?(l.style.backgroundColor="white",l.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",l.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(l.style.backgroundColor="transparent",l.style.boxShadow="none")})}function P(t,e){function o(s){return s<.5?2*s*s:-1+(4-2*s)*s}function r(s){const d=e?s:1-s;t.style.height=`${d*100}vh`,t.style.opacity=`${d}`}e&&(t.style.visibility="visible"),ht({timing:o,draw:r,duration:300}),e||setTimeout(()=>{t.style.visibility="hidden",t.style.height="0"},300)}function ht({timing:t,draw:e,duration:n}){let o=performance.now();requestAnimationFrame(function r(s){let a=(s-o)/n;a>1&&(a=1);let d=t(a);e(d),a<1&&requestAnimationFrame(r)})}const bt="https://www.mku-journal.online",B=K.create({baseURL:bt,headers:{"Content-Type":"application/json"}}),A=async t=>{try{return(await t).data}catch(e){return e instanceof Q?(console.error("API error:",e.response?.data||e.message),{errors:[{message:e.response?.data?.message||e.message}]}):e instanceof Error?(console.error("General error:",e.message),{errors:[{message:e.message}]}):(console.error("Unknown error:",e),{errors:[{message:"An unexpected error occurred."}]})}},It=(t,e,n)=>A(B.get("/catalog/all-list",{params:{type:n,page:t,limit:e}})),Lt=t=>A(B.get(`/catalog/${t}/info`)),St=t=>A(B.get(`${t?"/catalog/recommendations?is_main=true":"/catalog/recommendations"}`));export{nt as a,Lt as b,vt as c,Ct as d,$t as e,Z as f,St as g,It as h,wt as i,kt as r};
