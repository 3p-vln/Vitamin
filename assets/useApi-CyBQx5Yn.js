import{g as r,a as b,c,r as l}from"./useCallDom-DDNnwvp7.js";import{a as F,b as X,A as Z}from"./index-wYSWI2m-.js";function tt(){const t=document.querySelectorAll(".header__user-name"),e=localStorage.getItem("userInfo");if(t&&e){const n=JSON.parse(e);t.forEach(o=>{const i=o;i.innerText=`${n.first_name} ${n.last_name}`})}}async function et(t){let e=null;if(typeof t=="string"?e=r(t):e=t,!e)return;const n=r(".counter__plus",e),o=r(".counter__minus",e),i=r(".counter__items",e);let s=Number(i?.innerText);!i||!n||!o||(T(n,o,s),o.addEventListener("click",()=>{nt(i,s),s=Number(i?.innerText),T(n,o,s)}),n.addEventListener("click",()=>{ot(i,s),s=Number(i?.innerText),T(n,o,s)}),M(i,s))}function M(t,e){t.textContent=e.toString()}function nt(t,e){e>1&&(e--,M(t,e))}function ot(t,e){e<999&&(e++,M(t,e))}function T(t,e,n){n!==999&&n!==1&&(t.style.opacity="1",e.style.opacity="1"),n===999&&(t.style.opacity="0.3"),n===1&&(e.style.opacity="0.3")}function it(t){const e=r(".dropdown",t),n=r(".dropdown__box",t),o=r(".dropdown__text",t),i=r(".dropdown__list",t),s=b(".dropdown__item",t);!e||!n||!o||!i||!s||(e.addEventListener("click",a=>W(a,n,i)),s.forEach(a=>{a.addEventListener("click",()=>st(a,o,n,i))}),document.addEventListener("click",a=>at(a,e,i,n)))}function W(t,e,n){t.stopPropagation(),e&&(e.classList.toggle("dropdown__box_active"),n&&n.classList.toggle("dropdown__list_active"))}function rt(t,e){t&&(c(t,"remove","dropdown__box_active"),e&&c(e,"remove","dropdown__list_active"))}function st(t,e,n,o){const i=t.textContent;i&&e&&(e.textContent=i,W(event,n,o))}function at(t,e,n,o){e&&n&&!e.contains(t.target)&&!n.contains(t.target)&&rt(o,n)}const R=r(".header__bag"),g=r(".cart"),q=r(".cart__close"),V=r(".cart__bg"),p=r(".cart__items");let $=b(".prod"),u;const w=r(".info__backbtn");async function ct(){!R||!q||!V||!p||(R.addEventListener("click",t=>{dt(t),E()}),q.addEventListener("click",()=>{j(),E()}),ft(),$.forEach(t=>{const e=r(".prod__autoship-text",t);e&&_t(e)}),V.addEventListener("click",()=>{j(),E()}))}function dt(t){t.stopPropagation(),g&&(c(g,"add","cart_active"),w&&(w.style.zIndex="1"))}function j(){g&&(c(g,"remove","cart_active"),w&&(w.style.zIndex="25"))}function ut(t){$&&$.forEach(e=>{const n=r(".prod__close",e);n&&n.addEventListener("click",()=>{e.remove(),lt(t)})})}function lt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");if(e=e.filter(n=>n.id!==t),localStorage.setItem("cartItems",JSON.stringify(e)),e.length===0){u=!0,h(u);return}}function E(){if(!g)return;const t=r("body");if(t){if(g.classList.contains("cart_active")){t.style.overflow="hidden";return}t.style.overflow="auto"}}function _t(t){window.innerWidth<768&&(t.innerText="Deliver every")}function O(t,e=!1,n="30",o=1){if(!p)return;const i=l("div",["cart__item","prod",`prod_${t.id}`]),s=l("div","prod__img");t.type==="Vitamins & Dietary Supplements"&&c(s,"add","prod__img_purple"),t.type==="Minerals"&&c(s,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&c(s,"add","prod__img_pink"),t.type==="Pain Relief"&&c(s,"add","prod__img_blue"),t.type==="Antioxidants"&&c(s,"add","prod__img_orange"),t.type==="Weight Loss"&&c(s,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&c(s,"add","prod__img_red"),s.innerHTML=`
    <img src="${t.img}" alt="" />
  `;const a=l("div","prod__info"),d=l("div","prod__title-and-close"),y=l("p","prod__title");y.innerText=t.name;const x=l("div","prod__close");x.innerHTML=`
    <span></span>
    <span></span>
  `;const I=l("div","prod__counter-and-price"),L=l("div","prod__counter");L.innerHTML=`
    <button class="counter__minus">
      <svg>
        <use href="#minus"></use>
      </svg>
    </button>
    <p class="counter__items">${o}</p>
    <button class="counter__plus">
      <svg>
        <use href="#plus"></use>
      </svg>
    </button>
  `,et(L);const v=l("p","prod__price"),Q=Y(t.price,t.discount,o),U=G(t.price,o);t.type==="Sale%"?(c(v,"add","prod__price_sale"),v.innerHTML=`<span>$${U}</span> $${Q}`):v.innerText=`$${U}`;const S=l("div","prod__autoship");S.innerHTML=`
    <div class="prod__checkbox">
      <input type="checkbox" name="autoship" ${e?"checked":""}/>
      <span></span>
    </div>
    <p class="prod__autoship-text">Autoship every</p>
    <div class="dropdown">
      <div class="dropdown__box">
        <p class="dropdown__text">${n}</p>
        <div class="dropdown__arrow">
          <svg>
            <use href="#back-arrow"></use>
          </svg>
        </div>
      </div>
      <div class="dropdown__list">
        <button class="dropdown__item">10</button>
        <button class="dropdown__item">20</button>
        <button class="dropdown__item">30</button>
        <button class="dropdown__item">40</button>
        <button class="dropdown__item">50</button>
        <button class="dropdown__item">60</button>
      </div>
    </div>
    days
  `,it(S),d.appendChild(y),d.appendChild(x),I.appendChild(L),I.appendChild(v),a.appendChild(d),a.appendChild(I),a.appendChild(S),i.appendChild(s),i.appendChild(a),p.appendChild(i),u=!1,h(u),pt(t),$=b(".prod"),ut(t.id),K(t)}function Y(t,e,n){const o=parseFloat(t);if(isNaN(o))throw new Error("Invalid price format");return(o*(1-e/100)*n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function G(t,e){const n=parseFloat(t);if(isNaN(n))throw new Error("Invalid price format");return(n*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function pt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");const n=e.some(s=>s.id===t.id),o=r("autoship__on-off")?.classList.contains("autoship__on-off_active")||!1,i=Number(r(".count__items")?.innerText);n||e.push({...t,autoshipChecked:o,autoshipDays:"30",counts:i}),localStorage.setItem("cartItems",JSON.stringify(e))}function K(t){const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=b(`.prod_${t.id} .dropdown__item`),i=r(`.prod_${t.id} .counter__minus`),s=r(`.prod_${t.id} .counter__plus`),a=r(`.prod_${t.id} .counter__items`);e&&e.addEventListener("change",()=>{f(`${t.id}`,e.checked,n?.textContent||"30",Number(a?.textContent))}),n&&o.forEach(d=>{d.addEventListener("click",y=>{const x=y.target.textContent||"30";f(`${t.id}`,e?.checked,x,Number(a?.textContent))})}),!(!i||!s||!a)&&(i.addEventListener("click",()=>{a.textContent=a.textContent,z(t,Number(a.textContent)),f(`${t.id}`,e.checked,n?.textContent||"30",Number(a.textContent))}),s.addEventListener("click",()=>{a.textContent=a.textContent,z(t,Number(a.textContent)),f(`${t.id}`,e.checked,n?.textContent||"30",Number(a.textContent))}))}function z(t,e){const n=Y(t.price,t.discount,e),o=G(t.price,e),i=r(`.prod_${t.id} .prod__price`);i&&(t.type==="Sale%"?i.innerHTML=`<span>$${o}</span> $${n}`:i.innerText=`$${o}`)}function f(t,e,n,o){let i=JSON.parse(localStorage.getItem("cartItems")||"[]");const s=i.findIndex(a=>a.id===Number(t));s!==-1&&(i[s].autoshipChecked=e,i[s].autoshipDays=n,i[s].counts=o,localStorage.setItem("cartItems",JSON.stringify(i)))}function ft(){const t=JSON.parse(localStorage.getItem("cartItems")||"[]");if(t.length===0){u=!0,h(u);return}u=!1,h(u),t.forEach(e=>{O(e,e.autoshipChecked,e.autoshipDays,e.counts),K(e)})}function kt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.length===0&&(u=!0,h(u)),e.some(o=>o.id===t.id)||O(t)}function $t(t){if(!t.disabled_subscribe)return;const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=r(".autoship__dropdown .dropdown__text")?.textContent,i=r(`.prod_${t.id} .counter__items`);e&&n&&o&&(e.checked=!0,n.innerText=o),f(`${t.id}`,e.checked,n?.textContent||"30",Number(i?.textContent))}function wt(t){if(!t.disabled_subscribe)return;const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=r(`.prod_${t.id} .counter__items`);e&&(e.checked=!1),f(`${t.id}`,e.checked,n?.textContent||"30",Number(o?.textContent))}function It(t){const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=r(`.prod_${t.id} .counter__items`),i=r(".count__counter .counter__items");let s=JSON.parse(localStorage.getItem("cartItems")||"[]");s.length===0&&(u=!0,h(u));const a=s.some(d=>d.id===t.id);if(i){if(!a){O(t,!1,"30",Number(i.innerText)),console.log(1);return}o&&(o.innerText=(Number(o.textContent)+Number(i.innerText)).toString(),f(`${t.id}`,e.checked,n?.textContent||"30",Number(o.innerText)))}}function h(t){if(p&&(t||(c(p,"remove","empty"),b(".cart__empty").forEach(n=>n.remove())),t)){const e=l("p","cart__empty");e.innerText="Your cart is empty",c(p,"add","empty"),p.appendChild(e)}}function mt(){document.querySelectorAll(".sign-out").forEach(e=>{e.addEventListener("click",()=>{localStorage.removeItem("userInfo"),F.remove("accessToken",{path:"/"}),F.remove("refreshToken",{path:"/"}),window.location.href="/Vitamin"})})}const B=r(".burger__btn"),m=r(".burger__menu.main"),N=r(".header__bag"),P=r(".header__logo"),C=r(".pack-info__bg_hulf-circle"),_=r(".header");function Lt(){if(!m)return;const t=r(".menu__item_shop",m),e=r(".menu__item_info",m),n=r(".header__profile",m),o=r(".burger__menu.shop"),i=r(".burger__menu.info"),s=r(".burger__menu.profile");bt(),B&&t&&o&&e&&i&&n&&s&&(k("burger__btn","main"),k("menu__item_shop","shop"),k("menu__item_info","info"),k("header__profile_adapt","profile"),D("shop__title","shop"),D("info__title","info"),D("profile__title","profile")),tt(),ct(),mt()}function k(t,e){if(t){const n=r(`.${t}`),o=r(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const i=!o.classList.contains(`${e}_active`);if(o.classList.contains("main")){o.classList.toggle(`${e}_active`),n.classList.toggle(`${t}_active`),gt(),ht(),A(o,i);return}o.classList.add(`${e}_active`),A(o,i)});return}}}function D(t,e){if(t){const n=r(`.${t} .back-btn`),o=r(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const i=!o.classList.contains(`${e}_active`);o.classList.remove(`${e}_active`),A(o,i)});return}}}function gt(){if(N&&P&&m){if(m.classList.contains("main_active")){P.style.opacity="0",N.style.display="none",C&&(C.style.display="none");return}C&&(C.style.display="block"),P.style.opacity="1",N.style.display="block"}}function ht(){if(!B)return;const t=r("body");if(t&&_){if(B.classList.contains("burger__btn_active")){t.style.overflow="hidden";return}t.style.overflow="auto",_.style.backgroundColor="white"}}function bt(){_&&window.addEventListener("scroll",()=>{window.scrollY>50?(_.style.backgroundColor="white",_.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",_.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(_.style.backgroundColor="transparent",_.style.boxShadow="none")})}function A(t,e){function o(s){return s<.5?2*s*s:-1+(4-2*s)*s}function i(s){const d=e?s:1-s;t.style.height=`${d*100}vh`,t.style.opacity=`${d}`}e&&(t.style.visibility="visible"),yt({timing:o,draw:i,duration:300}),e||setTimeout(()=>{t.style.visibility="hidden",t.style.height="0"},300)}function yt({timing:t,draw:e,duration:n}){let o=performance.now();requestAnimationFrame(function i(s){let a=(s-o)/n;a>1&&(a=1);let d=t(a);e(d),a<1&&requestAnimationFrame(i)})}const xt="https://www.mku-journal.online",J=X.create({baseURL:xt,headers:{"Content-Type":"application/json"}}),H=async t=>{try{return(await t).data}catch(e){return e instanceof Z?(console.error("API error:",e.response?.data||e.message),{errors:[{message:e.response?.data?.message||e.message}]}):e instanceof Error?(console.error("General error:",e.message),{errors:[{message:e.message}]}):(console.error("Unknown error:",e),{errors:[{message:"An unexpected error occurred."}]})}},St=(t,e,n)=>H(J.get("/catalog/all-list",{params:{type:n,page:t,limit:e}})),Tt=t=>H(J.get(`/catalog/${t}/info`)),Et=t=>H(J.get(`${t?"/catalog/recommendations?is_main=true":"/catalog/recommendations"}`));export{it as a,Tt as b,It as c,kt as d,$t as e,et as f,Et as g,St as h,Lt as i,wt as r};
