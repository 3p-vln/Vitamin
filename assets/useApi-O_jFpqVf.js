import{g as s,a as $,c,r as u}from"./useCallDom-DDNnwvp7.js";import{a as Y,b as ot,A as it}from"./index-wYSWI2m-.js";function st(){const t=document.querySelectorAll(".header__user-name"),e=localStorage.getItem("userInfo");if(t&&e){const n=JSON.parse(e);t.forEach(o=>{const i=o;i.innerText=`${n.first_name} ${n.last_name}`})}}async function rt(t){let e=null;if(typeof t=="string"?e=s(t):e=t,!e)return;const n=s(".counter__plus",e),o=s(".counter__minus",e),i=s(".counter__items",e);let r=Number(i?.innerText);!i||!n||!o||(B(n,o,r),o.addEventListener("click",()=>{at(i,r),r=Number(i?.innerText),B(n,o,r)}),n.addEventListener("click",()=>{ct(i,r),r=Number(i?.innerText),B(n,o,r)}),H(i,r))}function H(t,e){t.textContent=e.toString()}function at(t,e){e>1&&(e--,H(t,e))}function ct(t,e){e<999&&(e++,H(t,e))}function B(t,e,n){n!==999&&n!==1&&(t.style.opacity="1",e.style.opacity="1"),n===999&&(t.style.opacity="0.3"),n===1&&(e.style.opacity="0.3")}function dt(t){const e=s(".dropdown",t),n=s(".dropdown__box",t),o=s(".dropdown__text",t),i=s(".dropdown__list",t),r=$(".dropdown__item",t);!e||!n||!o||!i||!r||(e.addEventListener("click",a=>X(a,n,i)),r.forEach(a=>{a.addEventListener("click",()=>ut(a,o,n,i))}),document.addEventListener("click",a=>pt(a,e,i,n)))}function X(t,e,n){t.stopPropagation(),e&&(e.classList.toggle("dropdown__box_active"),n&&n.classList.toggle("dropdown__list_active"))}function lt(t,e){t&&(c(t,"remove","dropdown__box_active"),e&&c(e,"remove","dropdown__list_active"))}function ut(t,e,n,o){const i=t.textContent;i&&e&&(e.textContent=i,X(event,n,o))}function pt(t,e,n,o){e&&n&&!e.contains(t.target)&&!n.contains(t.target)&&lt(o,n)}const z=s(".header__bag"),b=s(".cart"),V=s(".cart__close"),j=s(".cart__bg"),_=s(".cart__items");let S=$(".prod"),l;const T=s(".info__backbtn");async function _t(){!z||!V||!j||!_||(z.addEventListener("click",t=>{ft(t),A()}),V.addEventListener("click",()=>{G(),A()}),Z(),m(),S.forEach(t=>{const e=s(".prod__autoship-text",t);e&&ht(e)}),j.addEventListener("click",()=>{G(),A()}))}function ft(t){t.stopPropagation(),b&&(c(b,"add","cart_active"),T&&(T.style.zIndex="1"))}function G(){b&&(c(b,"remove","cart_active"),T&&(T.style.zIndex="25"))}function mt(t){S&&S.forEach(e=>{const n=s(".prod__close",e);n&&n.addEventListener("click",()=>{e.remove(),gt(t)})})}function gt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");if(e=e.filter(n=>n.id!==t),localStorage.setItem("cartItems",JSON.stringify(e)),m(),e.length===0){l=!0,v(l),m();return}}function A(){if(!b)return;const t=s("body"),e=s("header");if(!t||!e)return;const n=window.innerWidth-document.documentElement.clientWidth,o=window.scrollY,i=s(".info__backbtn");if(b.classList.contains("cart_active")){t.style.position="fixed",t.style.top=`-${o}px`,t.style.left="0",t.style.width="100%",t.style.overflow="hidden",t.style.paddingRight=`${n}px`,e.style.paddingRight=`${n}px`,o>50&&i&&(i.style.opacity="0");return}const r=Math.abs(parseInt(t.style.top,10))||0;t.style.position="",t.style.top="",t.style.left="",t.style.width="",t.style.overflow="",t.style.paddingRight="",e.style.paddingRight="",i&&(i.style.opacity=""),window.scrollTo(0,r)}function ht(t){window.innerWidth<768&&(t.innerText="Deliver every")}function J(t,e=!1,n="30",o=1){if(!_)return;const i=u("div",["cart__item","prod",`prod_${t.id}`]),r=u("div","prod__img");t.type==="Vitamins & Dietary Supplements"&&c(r,"add","prod__img_purple"),t.type==="Minerals"&&c(r,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&c(r,"add","prod__img_pink"),t.type==="Pain Relief"&&c(r,"add","prod__img_blue"),t.type==="Antioxidants"&&c(r,"add","prod__img_orange"),t.type==="Weight Loss"&&c(r,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&c(r,"add","prod__img_red"),r.innerHTML=`
    <img src="${t.img}" alt="" />
  `;const a=u("div","prod__info"),d=u("div","prod__title-and-close"),k=u("p","prod__title");k.innerText=t.name;const I=u("div","prod__close");I.innerHTML=`
    <span></span>
    <span></span>
  `;const N=u("div","prod__counter-and-price"),P=u("div","prod__counter");P.innerHTML=`
    <button class="counter__minus">
      <svg>
        <use href="#minus"></use>
      </svg>
    </button>
    <p class="counter__items">${o}</p>
    <button class="counter__plus">
      <svg>
        <use href="#plus"></use>
      </svg>
    </button>
  `,rt(P);const C=u("p","prod__price"),nt=F(t.price,t.discount,o),q=R(t.price,o);t.type==="Sale%"?(c(C,"add","prod__price_sale"),C.innerHTML=`<span>$${q}</span> $${nt}`):C.innerText=`$${q}`;const D=u("div","prod__autoship");D.innerHTML=`
    <div class="prod__checkbox">
      <input type="checkbox" name="autoship" ${e?"checked":""}/>
      <span></span>
    </div>
    <p class="prod__autoship-text">Autoship every</p>
    <div class="dropdown">
      <div class="dropdown__box">
        <p class="dropdown__text">${n}</p>
        <div class="dropdown__arrow">
          <svg>
            <use href="#back-arrow"></use>
          </svg>
        </div>
      </div>
      <div class="dropdown__list">
        <button class="dropdown__item">10</button>
        <button class="dropdown__item">20</button>
        <button class="dropdown__item">30</button>
        <button class="dropdown__item">40</button>
        <button class="dropdown__item">50</button>
        <button class="dropdown__item">60</button>
      </div>
    </div>
    days
  `,dt(D),d.appendChild(k),d.appendChild(I),N.appendChild(P),N.appendChild(C),a.appendChild(d),a.appendChild(N),a.appendChild(D),i.appendChild(r),i.appendChild(a),_.appendChild(i),l=!1,v(l),yt(t),S=$(".prod"),mt(t.id),U(t)}function F(t,e,n){const o=parseFloat(t);if(isNaN(o))throw new Error("Invalid price format");return(o*(1-e/100)*n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function R(t,e){const n=parseFloat(t);if(isNaN(n))throw new Error("Invalid price format");return(n*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function yt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");const n=e.some(r=>r.id===t.id),o=s("autoship__on-off")?.classList.contains("autoship__on-off_active")||!1,i=Number(s(".count__items")?.innerText);n||e.push({...t,autoshipChecked:o,autoshipDays:"30",counts:i}),localStorage.setItem("cartItems",JSON.stringify(e))}function U(t){const e=s(`.prod_${t.id} .prod__checkbox input`),n=s(`.prod_${t.id} .dropdown__text`),o=$(`.prod_${t.id} .dropdown__item`),i=s(`.prod_${t.id} .counter__minus`),r=s(`.prod_${t.id} .counter__plus`),a=s(`.prod_${t.id} .counter__items`);e&&e.addEventListener("change",()=>{g(`${t.id}`,e.checked,n?.textContent||"30",Number(a?.textContent))}),n&&o.forEach(d=>{d.addEventListener("click",k=>{const I=k.target.textContent||"30";g(`${t.id}`,e?.checked,I,Number(a?.textContent))})}),!(!i||!r||!a)&&(i.addEventListener("click",()=>{K(t,Number(a.textContent)),g(`${t.id}`,e.checked,n?.textContent||"30",Number(a.textContent)),m()}),r.addEventListener("click",()=>{K(t,Number(a.textContent)),g(`${t.id}`,e.checked,n?.textContent||"30",Number(a.textContent)),m()}))}function K(t,e){const n=F(t.price,t.discount,e),o=R(t.price,e),i=s(`.prod_${t.id} .prod__price`);i&&(t.type==="Sale%"?i.innerHTML=`<span>$${o}</span> $${n}`:i.innerText=`$${o}`)}function g(t,e,n,o){let i=JSON.parse(localStorage.getItem("cartItems")||"[]");const r=i.findIndex(a=>a.id===Number(t));r!==-1&&(i[r].autoshipChecked=e,i[r].autoshipDays=n,i[r].counts=o,localStorage.setItem("cartItems",JSON.stringify(i)))}function Z(){const t=JSON.parse(localStorage.getItem("cartItems")||"[]");if(t.length===0){l=!0,v(l);return}l=!1,v(l),_&&(_.innerHTML="",t.forEach(e=>{J(e,e.autoshipChecked,e.autoshipDays,e.counts),U(e)}))}function Ct(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.length===0&&(l=!0,v(l)),e.some(o=>o.id===t.id)||J(t),m()}function Lt(t){if(!t.disabled_subscribe)return;const e=s(`.prod_${t.id} .prod__checkbox input`),n=s(`.prod_${t.id} .dropdown__text`),o=s(".autoship__dropdown .dropdown__text")?.textContent,i=s(`.prod_${t.id} .counter__items`);e&&n&&o&&(e.checked=!0,n.innerText=o),g(`${t.id}`,e.checked,n?.textContent||"30",Number(i?.textContent))}function St(t){if(!t.disabled_subscribe)return;const e=s(`.prod_${t.id} .prod__checkbox input`),n=s(`.prod_${t.id} .dropdown__text`),o=s(`.prod_${t.id} .counter__items`);e&&(e.checked=!1),g(`${t.id}`,e.checked,n?.textContent||"30",Number(o?.textContent))}function Tt(t){const e=s(`.prod_${t.id} .prod__checkbox input`),n=s(`.prod_${t.id} .dropdown__text`),o=s(`.prod_${t.id} .counter__items`),i=s(".count__counter .counter__items");let r=JSON.parse(localStorage.getItem("cartItems")||"[]");r.length===0&&(l=!0,v(l));const a=r.some(d=>d.id===t.id);if(i){if(!a){J(t,!1,"30",Number(i.innerText)),m();return}o&&(o.innerText=(Number(o.textContent)+Number(i.innerText)).toString(),g(`${t.id}`,e.checked,n?.textContent||"30",Number(o.innerText)),U(t),Z(),m())}}function v(t){if(_&&(t||(c(_,"remove","empty"),$(".cart__empty").forEach(n=>n.remove())),t)){const e=u("p","cart__empty");e.innerText="Your cart is empty",c(_,"add","empty"),_.appendChild(e)}}function m(){let t=JSON.parse(localStorage.getItem("cartItems")||"[]"),e=0,n;const o=s("#total-cart-price");o&&(t?.length===0&&(o.innerText="$0"),t.forEach(i=>{i.type==="Sale%"?n=F(i.price,i.discount,i.counts):n=R(i.price,i.counts),e+=parseFloat(n.replace(/,/g,"").replace(/\s/g,""))}),o.innerText=`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`)}function bt(){document.querySelectorAll(".sign-out").forEach(e=>{e.addEventListener("click",()=>{localStorage.removeItem("userInfo"),Y.remove("accessToken",{path:"/"}),Y.remove("refreshToken",{path:"/"}),window.location.href="/Vitamin"})})}const E=s(".burger__btn"),p=s(".burger__menu.main"),x=s(".header__bag"),w=s(".header__logo"),h=s(".pack-info__bg_hulf-circle"),f=s(".header");function Et(){if(!p)return;const t=s(".menu__item_shop",p),e=s(".menu__item_info",p),n=s(".header__profile",p),o=s(".burger__menu.shop"),i=s(".burger__menu.info"),r=s(".burger__menu.profile");et(),E&&t&&o&&e&&i&&n&&r&&(L("burger__btn","main"),L("menu__item_shop","shop"),L("menu__item_info","info"),L("header__profile_adapt","profile"),O("shop__title","shop"),O("info__title","info"),O("profile__title","profile"),wt(o,i,r)),st(),_t(),bt()}function L(t,e){if(t){const n=s(`.${t}`),o=s(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const i=!o.classList.contains(`${e}_active`);if(o.classList.contains("main")){o.classList.toggle(`${e}_active`),n.classList.toggle(`${t}_active`),vt(),tt(),y(o,i);return}o.classList.add(`${e}_active`),y(o,i)});return}}}function O(t,e){if(t){const n=s(`.${t} .back-btn`),o=s(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const i=!o.classList.contains(`${e}_active`);o.classList.remove(`${e}_active`),y(o,i)});return}}}function vt(){if(x&&w&&p){if(p.classList.contains("main_active")){w.style.opacity="0",x.style.display="none",h&&(h.style.display="none");return}h&&(h.style.display="block"),w.style.opacity="1",x.style.display="block"}}function tt(){if(!E)return;const t=s("body");if(t&&f){if(E.classList.contains("burger__btn_active")){t.style.overflow="hidden";return}t.style.overflow="auto",f.style.backgroundColor="white"}}function et(){Q(),window.addEventListener("scroll",Q)}function Q(){f&&(window.scrollY>50?(f.style.backgroundColor="white",f.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",f.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(f.style.backgroundColor="transparent",f.style.boxShadow="none"))}function y(t,e){function o(r){return r<.5?2*r*r:-1+(4-2*r)*r}function i(r){const d=e?r:1-r;t.style.height=`${d*100}vh`,t.style.opacity=`${d}`}e&&(t.style.visibility="visible"),xt({timing:o,draw:i,duration:300}),e||setTimeout(()=>{t.style.visibility="hidden",t.style.height="0"},300)}function xt({timing:t,draw:e,duration:n}){let o=performance.now();requestAnimationFrame(function i(r){let a=(r-o)/n;a>1&&(a=1);let d=t(a);e(d),a<1&&requestAnimationFrame(i)})}function wt(t,e,n){window.addEventListener("resize",()=>{if(window.innerWidth>=768){if(E?.classList.remove("burger__btn_active"),!p||!t||!e||!n)return;c(p,"remove","main_active"),p.style.visibility="hidden",p.style.height="0vh",p.style.opacity="0",h&&(h.style.display="block"),x&&w&&(w.style.opacity="1",x.style.display="block"),tt(),et(),c(t,"remove","shop_active"),c(e,"remove","info_active"),c(n,"remove","profile_active");const o=t.classList.contains("shop_active");y(t,o);const i=e.classList.contains("info_active");y(e,i);const r=t.classList.contains("profile_active");y(n,r)}})}const $t="https://www.mku-journal.online",M=ot.create({baseURL:$t,headers:{"Content-Type":"application/json"}}),W=async t=>{try{return(await t).data}catch(e){return e instanceof it?(console.error("API error:",e.response?.data||e.message),{errors:[{message:e.response?.data?.message||e.message}]}):e instanceof Error?(console.error("General error:",e.message),{errors:[{message:e.message}]}):(console.error("Unknown error:",e),{errors:[{message:"An unexpected error occurred."}]})}},Nt=(t,e,n)=>W(M.get("/catalog/all-list",{params:{type:n,page:t,limit:e}})),Pt=t=>W(M.get(`/catalog/${t}/info`)),Dt=t=>W(M.get(`${t?"/catalog/recommendations?is_main=true":"/catalog/recommendations"}`));export{dt as a,Pt as b,Tt as c,ft as d,Ct as e,Lt as f,Dt as g,rt as h,Et as i,Nt as j,St as r};
