import{g as f,r as a,c as o}from"./use-call-dom-8Q8ZjlCD.js";import{j as h}from"./use-api-CoVlJz1c.js";import{g as u,a as _}from"./render-cart-BSVPqZQw.js";import"./js.cookie-Cz0CWeBA.js";import"./dropdown-MNiyI8bl.js";const g=f(".order-list__prods"),l=f(".order-list__total");function x(){y(),T()}function y(){const r=JSON.parse(localStorage.getItem("cartItems")||"[]");r.length!==0&&g&&(g.innerHTML="",r.forEach(async e=>{await S(e)}))}async function S(r){if(!g)return;const e=a("div",["prod",`prod_${r.id}`]),i=a("div","prod__img");try{const t=await h(`${r.id}`);if("errors"in t){console.error(t.errors);return}t.type==="Vitamins & Dietary Supplements"&&o(i,"add","prod__img_purple"),t.type==="Minerals"&&o(i,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&o(i,"add","prod__img_pink"),t.type==="Pain Relief"&&o(i,"add","prod__img_blue"),t.type==="Antioxidants"&&o(i,"add","prod__img_orange"),t.type==="Weight Loss"&&o(i,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&o(i,"add","prod__img_red"),i.innerHTML=`
        <picture>
           <source srcset="${t.img.img_webp}" type="image/webp">
           <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}" />
        </picture>`;const p=a("div","prod__count-and-name");p.innerText=`${r.counts} x ${t.name}`;const s=a("p","prod__price"),m=u(t.price,t.discount,r.counts),c=_(t.price,r.counts);t.type==="Sale%"?(o(s,"add","prod__price_sale"),s.innerHTML=`<span>$${c}</span> $${m}`):s.innerText=`$${c}`,e.appendChild(i),e.appendChild(p),e.appendChild(s),g.appendChild(e)}catch(t){console.error(t)}}function T(){if(!l)return;let r=JSON.parse(localStorage.getItem("cartItems")||"[]"),e=0,i,t=0;const p=a("p","order-list__subtotal"),s=a("p","order-list__shopping"),m=a("p","order-list__discount"),c=a("p","order-list__todays-total"),$=f(".accordion__price");r?.length===0&&(c.innerHTML="Today’s Total: <span>$0</span>"),r.forEach(async d=>{try{const n=await h(`${d.id}`);if("errors"in n){console.error(n.errors);return}if(n.type==="Sale%"?(i=u(n.price,n.discount,d.counts),t+=parseFloat(_(n.price,d.counts).replace(/,/g,"").replace(/\s/g,""))-parseFloat(u(n.price,n.discount,d.counts).replace(/,/g,"").replace(/\s/g,""))):i=_(n.price,d.counts),e+=parseFloat(i.replace(/,/g,"").replace(/\s/g,"")),p.innerHTML=`Subtotal <span>$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(p),t!==0&&(m.innerHTML=`Discount <span class="red">-$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(m)),s.innerHTML="Shipping <span>$9.20</span>",l.appendChild(s),e+=9.2,c.innerHTML=`Today’s Total: <span>$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(c),!$)return;$.innerText=`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}catch(n){console.log(n)}})}export{x as default};
