import"./style-C406C8Tq.js";import{b as A,c as d,d as D,e as x,r as E,f as C,a as B,i as N}from"./header-BX9U4d4b.js";import{r as M}from"./render-card-DLKKG8Yr.js";import{a as m}from"./useApi-UD5ZbRzq.js";import{g as e,c as s}from"./useCallDom-DDNnwvp7.js";import"./axios-BrcDDtdF.js";import"./index-CKL1PcRE.js";const F=new URLSearchParams(window.location.search),P=F.get("id")||void 0,l=e(".add-to-cart__btn");async function R(){if(l&&P){const t=await m(P);U(t)}}function U(t){l&&l.addEventListener("click",i=>{A(t),d(i)})}const H=new URLSearchParams(window.location.search),v=H.get("id")||void 0,_=e(".autoship__on-off");async function V(t){if(_&&v){const i=await m(v);W(i,t)}}function W(t,i){if(_){if(_.classList.contains("autoship__on-off_active")){if(!JSON.parse(localStorage.getItem("cartItems")||"[]").some(a=>a.id===t.id)){D(t),x(t),d(i);return}x(t),d(i);return}E(t)}}const O=new URLSearchParams(window.location.search),L=O.get("id")||void 0;async function J(){const t=e(".autoship__dropdown");if(!L||!t)return;const i=await m(L);C(".count__counter"),j(i),q(),z(i),B(t)}function j(t){if(!t)return;const i=e(".ilustrate");if(!i)return;t.type==="Vitamins & Dietary Supplements"&&s(i,"add","ilustrate_purple"),t.type==="Minerals"&&s(i,"add","ilustrate_green-mint"),t.type==="Prenatal Vitamins"&&s(i,"add","ilustrate_pink"),t.type==="Pain Relief"&&s(i,"add","ilustrate_blue"),t.type==="Antioxidants"&&s(i,"add","ilustrate_orange"),t.type==="Weight Loss"&&s(i,"add","ilustrate_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&s(i,"add","ilustrate_red");const r=e(".ilustrate__content img");r.src=t.img;const n=e(".info__category"),a=e(".count__svg svg use");if(!n||!a)return;t.type==="Vitamins & Dietary Supplements"&&(s(n,"add","info__category_purple"),a.setAttribute("href","#can")),t.type==="Minerals"&&(s(n,"add","info__category_green-mint"),a.setAttribute("href","#bottle")),t.type==="Prenatal Vitamins"&&(s(n,"add","info__category_pink"),a.setAttribute("href","#kit")),t.type==="Pain Relief"&&(s(n,"add","info__category_blue"),a.setAttribute("href","#box")),t.type==="Antioxidants"&&(s(n,"add","info__category_orange"),a.setAttribute("href","#can")),t.type==="Weight Loss"&&(s(n,"add","info__category_dark-blue"),a.setAttribute("href","#bottle")),(t.type==="Probiotics"||t.type==="Sale%")&&(s(n,"add","info__category_red"),a.setAttribute("href","#kit")),n.innerText=t.type;const c=e(".info__name");if(!c)return;c.innerText=t.name;const o=e(".count__capsules span");if(!o)return;o.innerText=t.capsules.toString();const p=e(".count__mg span");if(!p)return;p.innerText=t.weight_mg.toString();const g=e(".autoship__text");if(!g)return;window.innerWidth<768&&(g.innerText="Deliver every");const k=f(t.price,t.discount),u=e(".add-to-cart__price");if(!u)return;t.type==="Sale%"?(s(u,"add","add-to-cart__price_sale"),u.innerHTML=`<span><span class="price">$${t.price}</span> <span class="discount">-${t.discount}%</span></span> $${k}`):u.innerText=`$${t.price}`,G(u,t);const y=e(".descripton__info");if(!y)return;y.innerText=t.description;const h=e(".safety .inf");if(!h)return;h.innerText=t.satefy_information;const b=e(".indications .inf");if(!b)return;b.innerText=t.indications;const T=e(".ingredients .inf");if(!T)return;T.innerText=t.ingradients;const $=e(".directions .inf");if(!$)return;$.innerText=t.directions;const w=e(".legal .inf");w&&(w.innerText=t.legal_disclaimer)}function q(){const t=e(".info__backbtn");t&&t.addEventListener("click",()=>{window.location.href="shop.html"})}function z(t){const i=e(".autoship__on-off");if(!i)return;const r=e(".autoship__circle",i);r&&t.disabled_subscribe===!0&&i.addEventListener("click",async n=>{i.classList.toggle("autoship__on-off_active"),r.classList.toggle("autoship__circle_active"),V(n)})}function f(t,i,r=1){const n=parseFloat(t);if(isNaN(n))throw new Error("Invalid price format");return(n*(1-i/100)*r).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function S(t,i=1){const r=parseFloat(t);if(isNaN(r))throw new Error("Invalid price format");return(r*i).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function G(t,i){const r=e(".count__minus"),n=e(".count__plus");if(!t||!n||!r)return;let a=Number(e(".count__items")?.innerText),c="",o="";n.addEventListener("click",()=>{a=Number(e(".count__items")?.innerText),c=S(i.price,a),o=f(i.price,i.discount,a),i.type==="Sale%"?t.innerHTML=`<span>$${c} <span class="discount">-${i.discount}%</span></span> $${o}`:t.innerText=`$${c}`}),r.addEventListener("click",()=>{a=Number(e(".count__items")?.innerText),c=S(i.price,a),o=f(i.price,i.discount,a),i.type==="Sale%"?t.innerHTML=`<span>$${c} <span class="discount">-${i.discount}%</span></span> $${o}`:t.innerText=`$${c}`})}document.addEventListener("DOMContentLoaded",async()=>{N(),await J(),R(),M(".you-like__cards","gray")});
