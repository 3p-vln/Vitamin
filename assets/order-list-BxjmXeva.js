import{g as _,r as n,c as o}from"./use-call-dom-8Q8ZjlCD.js";import{j as h}from"./use-api-CoVlJz1c.js";import{g as $,a as u}from"./render-cart-BSVPqZQw.js";import"./js.cookie-Cz0CWeBA.js";import"./dropdown-MNiyI8bl.js";const g=_(".order-list__prods-container"),l=_(".order-list__total");function x(){S(),P()}function S(){const r=JSON.parse(localStorage.getItem("cartItems")||"[]");r.length!==0&&g&&(g.innerHTML="",r.forEach(async i=>{await T(i)}))}async function T(r){if(!g)return;const i=n("div",["prod",`prod_${r.id}`]),e=n("div","prod__img");try{const t=await h(`${r.id}`);if("errors"in t){console.error(t.errors);return}t.type==="Vitamins & Dietary Supplements"&&o(e,"add","prod__img_purple"),t.type==="Minerals"&&o(e,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&o(e,"add","prod__img_pink"),t.type==="Pain Relief"&&o(e,"add","prod__img_blue"),t.type==="Antioxidants"&&o(e,"add","prod__img_orange"),t.type==="Weight Loss"&&o(e,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&o(e,"add","prod__img_red"),e.innerHTML=`
        <picture>
           <source srcset="${t.img.img_webp}" type="image/webp">
           <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}" />
        </picture>`;const d=n("div","prod__count-and-name");d.innerText=`${r.counts} x ${t.name}`;const a=n("p","prod__price"),m=$(t.price,t.discount,r.counts),c=u(t.price,r.counts);t.type==="Sale%"?(o(a,"add","prod__price_sale"),a.innerHTML=`<span>$${c}</span> $${m}`):a.innerText=`$${c}`,i.appendChild(e),i.appendChild(d),i.appendChild(a),g.appendChild(i)}catch(t){console.error(t)}}async function P(){if(!l)return;let r=JSON.parse(localStorage.getItem("cartItems")||"[]"),i=0,e,t=0;const d=n("p","order-list__subtotal"),a=n("p","order-list__shopping"),m=n("p","order-list__discount"),c=n("p","order-list__todays-total"),f=_(".accordion__price");r?.length===0&&(c.innerHTML="Today’s Total: <span>$0</span>");try{for(const p of r){const s=await h(`${p.id}`);if("errors"in s){console.error(s.errors);return}if(s.type==="Sale%"){e=parseFloat(u(s.price,p.counts).replace(/,/g,"").replace(/\s/g,""));const y=parseFloat($(s.price,s.discount,p.counts).replace(/,/g,"").replace(/\s/g,""));t+=e-y,console.log("prod price: "+e),i+=Math.round(e*100)/100}else e=parseFloat(u(s.price,p.counts).replace(/,/g,"").replace(/\s/g,"")),console.log("prod price: "+e),i+=Math.round(e*100)/100}if(console.log("total: "+i.toFixed(2)),d.innerHTML=`Subtotal <span>$${i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(d),t!==0&&(m.innerHTML=`Discount <span class="red">-$${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(m),i-=t),a.innerHTML="Shipping <span>$9.20</span>",l.appendChild(a),i+=9.2,c.innerHTML=`Today’s Total: <span>$${i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>`,l.appendChild(c),!f)return;f.innerText=`$${i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}catch(p){console.error(p)}}export{x as default};
