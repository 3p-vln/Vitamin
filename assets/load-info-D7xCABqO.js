import{i as S}from"./dropdown-7a_ekS_C.js";import{j as $}from"./use-api-DWog3y8P.js";import{g as n,c as r}from"./use-call-dom-DDNnwvp7.js";import{d as k,e as w,c as b,r as A,f as D}from"./cart-BIAzM06-.js";import"./js.cookie-Cz0CWeBA.js";import"./scroll-lock-DIYiYMmB.js";const E=new URLSearchParams(window.location.search),x=E.get("id")||void 0,_=n(".autoship__on-off");async function M(t){if(_&&x)try{const i=await $(x);if("errors"in i){console.error(i.errors);return}N(i,t)}catch(i){console.error(i)}}function N(t,i){if(_){if(_.classList.contains("autoship__on-off_active")){if(!JSON.parse(localStorage.getItem("cartItems")||"[]").some(a=>a.id===t.id)){k(t),w(t),b(i);return}w(t),b(i);return}A(t)}}const C=new URLSearchParams(window.location.search),T=C.get("id")||void 0;async function q(){const t=n(".autoship__dropdown");if(!(!T||!t))try{const i=await $(T);if("errors"in i){console.error(i.errors);return}D(".count__counter"),F(i),B(),W(i),S(t)}catch(i){console.error(i)}}function F(t){const i=n(".ilustrate"),e=n(".info__category"),s=n(".count__svg svg use"),a=n(".info__name"),c=n(".count__capsules span"),u=n(".count__mg span"),o=n(".autoship__text"),l=n(".add-to-cart__price"),d=n(".descripton__info"),m=n(".safety .inf"),g=n(".indications .inf"),p=n(".ingredients .inf"),f=n(".directions .inf"),h=n(".legal .inf");if(!t||!i||!e||!s||!a||!c||!u||!o||!l||!d||!m||!g||!p||!f||!h)return;console.log("prodInfo",t),t.type==="Vitamins & Dietary Supplements"&&r(i,"add","ilustrate_purple"),t.type==="Minerals"&&r(i,"add","ilustrate_green-mint"),t.type==="Prenatal Vitamins"&&r(i,"add","ilustrate_pink"),t.type==="Pain Relief"&&r(i,"add","ilustrate_blue"),t.type==="Antioxidants"&&r(i,"add","ilustrate_orange"),t.type==="Weight Loss"&&r(i,"add","ilustrate_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&r(i,"add","ilustrate_red");const y=n(".ilustrate__content");if(!y)return;y.innerHTML=`
     <picture>
        <source srcset="${t.img.img_webp}" type="image/webp">
        <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}" loading="lazy"/>
     </picture>`,t.type==="Vitamins & Dietary Supplements"&&(r(e,"add","info__category_purple"),s.setAttribute("href","#can")),t.type==="Minerals"&&(r(e,"add","info__category_green-mint"),s.setAttribute("href","#bottle")),t.type==="Prenatal Vitamins"&&(r(e,"add","info__category_pink"),s.setAttribute("href","#kit")),t.type==="Pain Relief"&&(r(e,"add","info__category_blue"),s.setAttribute("href","#box")),t.type==="Antioxidants"&&(r(e,"add","info__category_orange"),s.setAttribute("href","#can")),t.type==="Weight Loss"&&(r(e,"add","info__category_dark-blue"),s.setAttribute("href","#bottle")),(t.type==="Probiotics"||t.type==="Sale%")&&(r(e,"add","info__category_red"),s.setAttribute("href","#kit")),e.innerText=t.type,a.innerText=t.name,c.innerText=t.capsules.toString(),u.innerText=t.weight_mg.toString(),window.innerWidth<768&&(o.innerText="Deliver every"),window.addEventListener("resize",()=>{window.innerWidth<768&&(o.innerText="Deliver every"),window.innerWidth>=768&&(o.innerText="Autoship this item every")});const L=P(t.price,t.discount);t.type==="Sale%"?(r(l,"add","add-to-cart__price_sale"),l.innerHTML=`<span><span class="price">$${t.price}</span> <span class="discount">-${t.discount}%</span></span> $${L}`):l.innerText=`$${t.price}`,U(l,t),d.innerText=t.description,m.innerText=t.satefy_information,g.innerText=t.indications,p.innerText=t.ingradients,f.innerText=t.directions,h.innerText=t.legal_disclaimer}function B(){const t=n(".info__backbtn");t&&t.addEventListener("click",()=>{window.location.href="shop.html"})}function W(t){const i=n(".autoship__on-off");if(!i)return;const e=n(".autoship__circle",i);e&&t.disabled_subscribe===!0&&i.addEventListener("click",async s=>{i.classList.toggle("autoship__on-off_active"),e.classList.toggle("autoship__circle_active"),M(s)})}function P(t,i,e=1){const s=parseFloat(t);if(isNaN(s))throw new Error("Invalid price format");return(s*(1-i/100)*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function R(t,i=1){const e=parseFloat(t);if(isNaN(e))throw new Error("Invalid price format");return(e*i).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function U(t,i){const e=n(".count__minus"),s=n(".count__plus"),a=n(".count__items");if(!t||!s||!e||!a)return;let c=Number(a.innerText),u="",o="";s.addEventListener("click",()=>{v(c,a,u,o,t,i)}),e.addEventListener("click",()=>{v(c,a,u,o,t,i)})}function v(t,i,e,s,a,c){t=Number(i.innerText),e=R(c.price,t),s=P(c.price,c.discount,t),c.type==="Sale%"?a.innerHTML=`<span>$${e} <span class="discount">-${c.discount}%</span></span> $${s}`:a.innerText=`$${e}`}export{q as default};
