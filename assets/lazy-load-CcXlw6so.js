import{a as v,c as g}from"./use-call-dom-DDNnwvp7.js";const E="modulepreload",b=function(n){return"/Vitamin/"+n},f={},k=function(r,t,d){let c=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");c=Promise.all(t.map(o=>{if(o=b(o),o in f)return;f[o]=!0;const l=o.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(!!d)for(let u=e.length-1;u>=0;u--){const m=e[u];if(m.href===o&&(!l||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${h}`))return;const i=document.createElement("link");if(i.rel=l?"stylesheet":E,l||(i.as="script",i.crossOrigin=""),i.href=o,a&&i.setAttribute("nonce",a),document.head.appendChild(i),l)return new Promise((u,m)=>{i.addEventListener("load",u),i.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}return c.then(()=>r()).catch(e=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e})};function w(){document.addEventListener("loadingIsFinished",()=>{setTimeout(()=>{v(".skeleton").forEach(r=>{g(r,"remove","skeleton")})},2e3)})}function I(){const n=new CustomEvent("loadingIsFinished");document.dispatchEvent(n)}function L(n,r){const t=document.querySelector(r);if(!t)return;new IntersectionObserver(async(c,e)=>{for(const s of c)if(s.isIntersecting){e.unobserve(s.target);try{await(await n()).default()}catch(a){console.error(`Ошибка загрузки модуля для ${r}:`,a)}}},{threshold:.1}).observe(t)}function S(){document.addEventListener("DOMContentLoaded",()=>{const n=v("img.lazy"),r=new IntersectionObserver((t,d)=>{t.forEach(c=>{if(c.isIntersecting){const e=c.target;e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src")),d.unobserve(e)}})},{rootMargin:"100px"});n.forEach(t=>r.observe(t))})}export{k as _,S as l,w as r,I as s,L as u};
