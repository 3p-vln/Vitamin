import"./style-CWWArEq8.js";import{g as i,a as o,c as l}from"./use-call-dom-DDNnwvp7.js";import{J as g}from"./just-validate.es-C73wyOde.js";function d(){return new Promise(e=>{const t=i("#firstQuestion"),n=i("#firstName");if(!t||!n){e(!1);return}const r=new g(t,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0});if(r.addField("#firstName",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]),document.readyState==="complete"){r.revalidate().then(s=>{s&&localStorage.setItem("firstName",n.value),e(s)});return}e(!1)})}function f(){return new Promise(e=>{const t=i("#emailQuestion"),n=i("#email");if(!t||!n){e(!1);return}const r=new g(t,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0});if(r.addField("#email",[{rule:"required",errorMessage:"This field is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})$/,errorMessage:"Write correct email"}]),document.readyState==="complete"){r.revalidate().then(s=>{e(s)});return}e(!1)})}const m=i(".count__current"),u=o(".quiz"),h=o("#next-btn"),v=i(".back");let a=p();function p(){const e=new URLSearchParams(window.location.search);return parseInt(e.get("question")||"0",10)}function _(e){const t=new URLSearchParams(window.location.search);t.set("question",e.toString()),window.history.replaceState({},"",`${window.location.pathname}?${t.toString()}`)}function w(e){u.forEach(t=>t.classList.remove("active")),u[e].classList.add("active"),m&&(m.textContent=(e+1).toString()),_(e)}function c(e){const t=a+e;t>=0&&t<u.length&&(a=t,w(a)),t<0&&window.history.back()}function L(){w(a),h&&(d(),f(),h.forEach(e=>{e.addEventListener("click",async t=>{if(t.preventDefault(),a===0){if(!await d())return;c(1);return}if(a===8){if(!await f())return;window.location.href="/Vitamin/personal-pack.html";return}c(1)})}),v&&v.addEventListener("click",()=>c(-1)))}const q=o(".quiz__btns");function E(){q.forEach(e=>{const t=o(".quiz__btn",e);t.forEach(n=>{n.addEventListener("click",()=>{t.forEach(r=>{l(r,"remove","quiz__btn_active")}),n.classList.contains("quiz__btn_active")||l(n,"add","quiz__btn_active")})})})}document.addEventListener("DOMContentLoaded",async()=>{L(),E()});
