import{g as o,a as C,c as _,r as L}from"./use-call-dom-CaqOo_cc.js";import{l as w,t as I}from"./render-cart-BFX7vwaJ.js";const p=o(".header__bag"),c=o(".cart"),h=o(".cart__close"),m=o(".cart__bg"),g=o(".cart__items"),e=o(".header"),k=o("html");let E=C(".prod"),d=0,f=!1;const a=o(".info__backbtn");function T(){!p||!h||!m||!g||(p.addEventListener("click",t=>P(t)),h.addEventListener("click",()=>y()),m.addEventListener("click",()=>y()),B())}function P(t){t.stopPropagation(),c&&(_(c,"add","cart_active"),f||(f=!0,w(),I(),E.forEach(s=>{const i=o(".prod__autoship-text",s);i&&A(i)})),a&&(a.style.zIndex="1"),v())}function y(){c&&(_(c,"remove","cart_active"),a&&(a.style.zIndex="25"),v())}function v(){if(!(!e||!k||!c||!g)){if(c.classList.contains("cart_active")){d=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${d}px`,document.body.style.left="0",document.body.style.width="100%",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.backgroundColor="white";const t=S();document.body.style.paddingRight=`${t}px`,e.style.paddingRight=`${t}px`;return}document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.width="",document.body.style.paddingRight="",document.documentElement.style.scrollBehavior="auto",window.scrollTo({top:d,behavior:"instant"}),document.documentElement.style.scrollBehavior="",e.style.top="",e.style.left="",e.style.position="",e.style.backgroundColor="",e.style.paddingRight="0"}}function S(){const t=L("div","");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),s}function A(t){window.innerWidth<768&&(t.innerText="Deliver every")}function B(){const s=new URLSearchParams(window.location.search).get("id"),i=o(".autoship__on-off"),r=o(".autoship__circle");let l=JSON.parse(localStorage.getItem("cartItems")||"[]");if(!s)return;const u=l.findIndex(n=>n.id===Number(s));l[u].autoshipChecked&&(console.log(l[u].autoshipChecked),i?.classList.toggle("autoship__on-off_active"),r?.classList.toggle("autoship__circle_active")),document.addEventListener("checkAutoship",()=>{let n=JSON.parse(localStorage.getItem("cartItems")||"[]");const b=n.findIndex(x=>x.id===Number(s));if(n[b].autoshipChecked==!0){i?.classList.add("autoship__on-off_active"),r?.classList.add("autoship__circle_active");return}i?.classList.remove("autoship__on-off_active"),r?.classList.remove("autoship__circle_active")})}export{P as c,T as i};
