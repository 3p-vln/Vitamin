import{a as h}from"./use-call-dom-DDNnwvp7.js";const g="modulepreload",b=function(c){return"/Vitamin/"+c},m={},p=function(i,t,d){let s=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),a=n?.nonce||n?.getAttribute("nonce");s=Promise.all(t.map(r=>{if(r=b(r),r in m)return;m[r]=!0;const l=r.endsWith(".css"),v=l?'[rel="stylesheet"]':"";if(!!d)for(let u=e.length-1;u>=0;u--){const f=e[u];if(f.href===r&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${v}`))return;const o=document.createElement("link");if(o.rel=l?"stylesheet":g,l||(o.as="script",o.crossOrigin=""),o.href=r,a&&o.setAttribute("nonce",a),document.head.appendChild(o),l)return new Promise((u,f)=>{o.addEventListener("load",u),o.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})}))}return s.then(()=>i()).catch(e=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=e,window.dispatchEvent(n),!n.defaultPrevented)throw e})};function w(c,i){const t=document.querySelector(i);if(!t)return;new IntersectionObserver(async(s,e)=>{for(const n of s)if(n.isIntersecting){e.unobserve(n.target);try{await(await c()).default()}catch(a){console.error(`Ошибка загрузки модуля для ${i}:`,a)}}},{threshold:.1}).observe(t)}function k(){document.addEventListener("DOMContentLoaded",()=>{const c=h("img.lazy"),i=new IntersectionObserver((t,d)=>{t.forEach(s=>{if(s.isIntersecting){const e=s.target;e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src")),d.unobserve(e)}})},{rootMargin:"100px"});c.forEach(t=>i.observe(t))})}export{p as _,k as l,w as u};
