import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./check-auth-Cd-eomUv.js";import{g as t,c as u,a as g}from"./use-call-dom-8Q8ZjlCD.js";import{a as p}from"./js.cookie-Cz0CWeBA.js";import{r as v,g as w}from"./use-api-Cxkryetj.js";import{J as d}from"./just-validate.es-C73wyOde.js";function M(){const a=t("#wholesale-registration-file"),e=t("#wholesale-registration-file-description-pc"),r=t("#wholesale-registration-file-name"),s=t("#registration-add-file-btn"),n=t("#wholesale-registration-submit-btn");a instanceof HTMLInputElement&&a.addEventListener("change",()=>{if(a.files&&a.files.length>0)if(window.innerWidth>=567&&e){const o=a.files[0].name,i=30,l=o.length>i?o.slice(0,i)+"...":o;e.textContent=l}else{const o=a.files[0].name,i=30,l=o.length>i?o.slice(0,i)+"...":o;r.textContent=l,r.style.opacity="1"}}),s&&a&&s.addEventListener("click",()=>{a.click()}),a&&n instanceof HTMLButtonElement&&a.addEventListener("change",()=>{u(n,"remove","registration-form__submit_disabled"),n.disabled=!1})}function L(){const a=t("#auth-card"),e=t("#regular-reg"),r=t("#wholesale-reg"),s=g(".registration-form__error-message"),n=t(".registration__container");a&&e&&r&&(e.addEventListener("click",()=>{u(r,"remove","registration__nav-btn_active"),u(e,"add","registration__nav-btn_active"),u(a,"add","flipped");const i=t("#regular-registration");i&&i.reset(),s.forEach(m=>{m.innerText=""}),g(".just-validate-error-label").forEach(m=>{m.remove()}),n&&(n.style.height="890px")}),r.addEventListener("click",()=>{u(r,"add","registration__nav-btn_active"),u(e,"remove","registration__nav-btn_active"),u(a,"remove","flipped");const i=t("#wholesale-registration");i&&i.reset();const l=t("#wholesale-registration-file-name");l&&(l.innerHTML="Permission",l.style.opacity="0.3");const m=t("#wholesale-registration-file-description-pc");m&&(m.innerHTML="Wholesale purchase permission",m.style.opacity="0.3");const c=t("#wholesale-registration-submit-btn");c&&(c.disabled=!0,u(c,"add","registration-form__submit_disabled")),s.forEach(h=>{h.innerText=""}),n&&(n.style.height="950px")}),g(".just-validate-error-label").forEach(i=>{i.remove()}))}async function f(a){const e=await v(a);if(!("errors"in e)){p.set("refreshToken",e.user.refreshToken,{path:"/"});const s=await w();localStorage.setItem("userInfo",JSON.stringify(s)),window.location.href="/Vitamin";return}console.log(e.errors[0].message);const r=g(".registration-form__error-message");if(r)switch(e.errors[0].message){case"Користувач вже зареєстрований":r.forEach(s=>{s.innerHTML="The user is already registered"});break;default:r.forEach(s=>{s.innerHTML="Error, try again later"})}}function b(){new d("#wholesale-registration").addField("#wholesale-registration-email",[{rule:"required",errorMessage:"Email is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9а-яА-Я."_%+-]+@[a-zA-Zа-яА-Я0-9-.]+\.[a-zA-Zа-яА-Я]{2,}$/u,errorMessage:"Enter a valid email address!"}]).addField("#wholesale-registration-first-name",[{rule:"required",errorMessage:"First name is required"},{rule:"minLength",value:2,errorMessage:"First name must be at least 2 characters"},{rule:"maxLength",value:30,errorMessage:"First name must be at most 30 characters"},{rule:"customRegexp",value:/^[A-Za-zА-Яа-яЁё]+$/,errorMessage:"First name must contain only letters"}]).addField("#wholesale-registration-last-name",[{rule:"required",errorMessage:"Last name is required"},{rule:"minLength",value:2,errorMessage:"Last name must be at least 2 characters"},{rule:"maxLength",value:30,errorMessage:"Last name must be at most 30 characters"},{rule:"customRegexp",value:/^[A-Za-zА-Яа-яЁё]+$/,errorMessage:"Last name must contain only letters"}]).addField("#wholesale-registration-password",[{rule:"required",errorMessage:"Password is required"},{rule:"minLength",value:8,errorMessage:"Password must be at least 8 characters"},{rule:"maxLength",value:50,errorMessage:"Password must be at most 50 characters"},{rule:"customRegexp",value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/,errorMessage:"Must contain uppercase, lowercase letter, and number"}]).addField("#wholesale-registration-file",[{rule:"required",errorMessage:"File is required"},{validator:()=>{const e=t("#wholesale-registration-file");return!e||!e.files||e.files.length===0?!1:["image/jpeg","image/png","image/webp"].includes(e.files[0].type)},errorMessage:"Only image (JPG, PNG, webp) are allowed"}]).onSuccess(async()=>{const e=t("#wholesale-registration");if(!e)return;const r=new FormData(e),s=r.get("file");if(!(s instanceof File))return;const n={role_type:"whosale",email:r.get("email")?.toString()??"",first_name:r.get("first_name")?.toString()??"",last_name:r.get("last_name")?.toString()??"",password:r.get("password")?.toString()??"",file:s};await f(n)})}function _(){new d("#regular-registration").addField("#regular-registration-email",[{rule:"required",errorMessage:"Email is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9а-яА-Я."_%+-]+@[a-zA-Zа-яА-Я0-9-.]+\.[a-zA-Zа-яА-Я]{2,}$/u,errorMessage:"Enter a valid email address!"}]).addField("#regular-registration-first-name",[{rule:"required",errorMessage:"Name required"},{rule:"minLength",value:2,errorMessage:"The name must contain a minimum of 2 characters"},{rule:"maxLength",value:30,errorMessage:"The name must not exceed 30 characters"},{rule:"customRegexp",value:/^[A-Za-zА-Яа-яЁё]+$/,errorMessage:"The name must contain only letters"}]).addField("#regular-registration-last-name",[{rule:"required",errorMessage:"Last name required"},{rule:"minLength",value:2,errorMessage:"Last name must contain a minimum of 2 characters"},{rule:"maxLength",value:30,errorMessage:"Last name must not exceed 30 characters"},{rule:"customRegexp",value:/^[A-Za-zА-Яа-яЁё]+$/,errorMessage:"The name must contain only letters"}]).addField("#regular-registration-password",[{rule:"required",errorMessage:"Password required"},{rule:"minLength",value:8,errorMessage:"Password must contain a minimum of 8 characters"},{rule:"maxLength",value:50,errorMessage:"Password must not exceed 50 characters"},{rule:"customRegexp",value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/,errorMessage:"Must contain uppercase, lowercase letter, and number"}]).onSuccess(async()=>{const e=t("#regular-registration");if(!e)return;const r=new FormData(e),s={role_type:"regular",email:r.get("email")?.toString()??"",first_name:r.get("first_name")?.toString()??"",last_name:r.get("last_name")?.toString()??"",password:r.get("password")?.toString()??""};await f(s)})}document.addEventListener("DOMContentLoaded",()=>{M(),L(),_(),b()});
