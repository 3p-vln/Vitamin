import{i as H}from"./dropdown-MNiyI8bl.js";import{i as P}from"./use-api-DGM808Zk.js";import{g as n,c as r}from"./use-call-dom-8Q8ZjlCD.js";import{c as h}from"./cart-CxZNLKWy.js";import{c as R,d as w,r as U,e as V}from"./cart-operation-CRIWGHRF.js";import{i as W}from"./render-cart-dlgLCC52.js";import"./js.cookie-Cz0CWeBA.js";import"./header-CPNAprGT.js";const z=new URLSearchParams(window.location.search),k=z.get("id")||void 0,b=n(".autoship__on-off");async function q(t){if(b&&k)try{const e=await P(k);J(e,t)}catch(e){console.error(e)}}function J(t,e){if(b){if(b.classList.contains("autoship__on-off_active")){if(!JSON.parse(localStorage.getItem("cartItems")||"[]").some(l=>l.id===t.id)){R(t),w(t),h(e);return}w(t),h(e);return}U(t)}}const O=new URLSearchParams(window.location.search),j=O.get("id")||void 0,g=n(".add-to-cart__btn");async function G(t){if(g&&j){if(!g)return;g.addEventListener("click",e=>{V(t),h(e)})}}const K=new URLSearchParams(window.location.search),y=K.get("id")||void 0,T=n(".autoship__dropdown"),u=n(".ilustrate"),o=n(".info__category"),d=n(".count__svg svg use"),L=n(".info__name"),S=n(".count__capsules span"),A=n(".count__mg span"),f=n(".autoship__text"),m=n(".add-to-cart__price"),E=n(".descripton__info"),D=n(".safety .inf"),M=n(".indications .inf"),B=n(".ingredients .inf"),C=n(".directions .inf"),F=n(".legal .inf"),Q=[u,o,d,L,S,A,f,m,E,D,M,B,C,F],x=n(".count__minus"),v=n(".count__plus"),p=n(".count__items");async function ut(){if(!(!y||!T))try{const t=await P(y);await G(t),W(".count__counter"),X(t),Y(),Z(t),H(T)}catch(t){console.error(t)}}function i(t){if(t)return t}function s(t,e,a){if(t)switch(e){case"innerText":t.textContent=a;break;case"innerHTML":t.innerHTML=a;break}}function X(t){if(Q.some(c=>!c))return;switch(t.type){case"Vitamins & Dietary Supplements":r(i(u),"add","ilustrate_purple");break;case"Minerals":r(i(u),"add","ilustrate_green-mint");break;case"Prenatal Vitamins":r(i(u),"add","ilustrate_pink");break;case"Pain Relief":r(i(u),"add","ilustrate_blue");break;case"Antioxidants":r(i(u),"add","ilustrate_orange");break;case"Weight Loss":r(i(u),"add","ilustrate_dark-blue");break;case"Probiotics":r(i(u),"add","ilustrate_red");break;case"Sale%":r(i(u),"add","ilustrate_red");break}const e=n(".ilustrate__content");if(!e)return;switch(e.innerHTML=`
     <picture>
        <source srcset="${t.img.img_webp}" type="image/webp">
        <img src="${t.img.img_default}" alt="prod" width="${t.img.img_width}" height="${t.img.img_height}" loading="lazy"/>
     </picture>`,t.type){case"Vitamins & Dietary Supplements":r(i(o),"add","info__category_purple"),i(d)?.setAttribute("href","#can");break;case"Minerals":r(i(o),"add","info__category_green-mint"),i(d)?.setAttribute("href","#bottle");break;case"Prenatal Vitamins":r(i(o),"add","info__category_pink"),i(d)?.setAttribute("href","#kit");break;case"Pain Relief":r(i(o),"add","info__category_blue"),i(d)?.setAttribute("href","#box");break;case"Antioxidants":r(i(o),"add","info__category_orange"),i(d)?.setAttribute("href","#can");break;case"Weight Loss":r(i(o),"add","info__category_dark-blue"),i(d)?.setAttribute("href","#bottle");break;case"Probiotics":r(i(o),"add","info__category_red"),i(d)?.setAttribute("href","#kit");break;case"Sale%":r(i(o),"add","info__category_red"),i(d)?.setAttribute("href","#kit");break}s(o,"innerText",t.type),s(L,"innerText",t.name),s(S,"innerText",t.capsules.toString()),s(A,"innerText",t.weight_mg.toString()),window.innerWidth<768&&s(f,"innerText","Deliver every"),window.addEventListener("resize",()=>{window.innerWidth<768&&s(f,"innerText","Deliver every"),window.innerWidth>=768&&s(f,"innerText","Autoship this item every")});const a=N(t.price,t.discount);t.type==="Sale%"?(r(i(m),"add","add-to-cart__price_sale"),s(m,"innerHTML",`<span><span class="price">$${t.price}</span> <span class="discount">-${t.discount}%</span></span> $${a}`)):s(m,"innerText",`$${t.price}`),tt(i(m),t),s(E,"innerText",t.description),s(D,"innerText",t.satefy_information),s(M,"innerText",t.indications),s(B,"innerText",t.ingradients),s(C,"innerText",t.directions),s(F,"innerText",t.legal_disclaimer)}function Y(){const t=n(".info__backbtn");t&&t.addEventListener("click",()=>{window.location.href="/Vitamin/shop.html"})}function Z(t){const e=n(".autoship__on-off");if(!e)return;const a=n(".autoship__circle",e);a&&t.disabled_subscribe===!0&&e.addEventListener("click",async c=>{e.classList.toggle("autoship__on-off_active"),a.classList.toggle("autoship__circle_active"),await q(c)})}function N(t,e,a=1){const c=parseFloat(t);if(isNaN(c))throw new Error("Invalid price format");return(c*(1-e/100)*a).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function I(t,e=1){const a=parseFloat(t);if(isNaN(a))throw new Error("Invalid price format");return(a*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function tt(t,e){if(!t||!v||!x||!p)return;let a=Number(p.innerText),c="",l="";v.addEventListener("click",()=>{$(a,p,c,l,t,e)}),x.addEventListener("click",()=>{$(a,p,c,l,t,e)})}function $(t,e,a,c,l,_){if(t=Number(e.innerText),a=I(_.price,t),c=N(_.price,_.discount,t),_.type==="Sale%"){l.innerHTML=`<span><span class="price">$${a}</span> <span class="discount">-${_.discount}%</span></span> $${c}`;return}l.innerText=`$${a}`}export{ut as default};
