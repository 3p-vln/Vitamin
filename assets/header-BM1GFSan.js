import{a as B,g as n,c as m}from"./use-call-dom-8Q8ZjlCD.js";import{a as g}from"./js.cookie-Cz0CWeBA.js";function $(){const e=B(".header__user-name"),t=localStorage.getItem("userInfo");if(e&&t){const i=JSON.parse(t);e.forEach(o=>{const s=o;s instanceof HTMLSpanElement&&(s.innerText=`${i.first_name} ${i.last_name}`)})}}function T(){B(".sign-out").forEach(t=>{t.addEventListener("click",()=>{window.location.href="/Vitamin",localStorage.removeItem("userInfo"),g.remove("accessToken",{path:"/"}),g.remove("refreshToken",{path:"/"})})})}function x(){const e=document.getElementById("authPopup"),t=n(".header__profile"),i=g.get("accessToken");if(!(e instanceof HTMLDialogElement))return;const o=n(".auth-pop-up__close",e),s=n(".auth-pop-up__container",e);t&&t.addEventListener("click",()=>{if(i){window.location.href="/Vitamin/profile.html";return}e.show()}),window.showPopup=function(){e.show()},o instanceof HTMLButtonElement&&(o.addEventListener("click",()=>{e.close()}),e.addEventListener("click",r=>{if(!(s instanceof HTMLDivElement))return;const c=r.target;c instanceof Node&&!s.contains(c)&&e.close()}))}const h=n(".burger__btn"),a=n(".burger__menu.main"),f=n(".header__bag"),_=n(".header__logo"),u=n(".pack-info__bg_hulf-circle"),l=n(".header"),v=n(".cart"),w=n(".burger__menu.shop"),L=n(".burger__menu.info"),k=n(".burger__menu.profile");function C(){if(!a)return;const e=n(".menu__item_shop",a),t=n(".menu__item_info",a),i=n(".header__profile",a);N(),I(),h&&e&&w&&t&&L&&i&&k&&(p("burger__btn","main"),p("menu__item_shop","shop"),p("menu__item_info","info"),p("header__profile_adapt","profile"),y("shop__title","shop"),y("info__title","info"),y("profile__title","profile"),P(w,L,k)),$(),T(),x()}function p(e,t){const i=n(`.${e}`),o=n(`.${t}`);i&&o&&i.addEventListener("click",()=>{const s=!o.classList.contains(`${t}_active`);if(o.classList.contains("main")){o.classList.toggle(`${t}_active`),i.classList.toggle(`${e}_active`),M(),H(),b(o,s);return}o.classList.add(`${t}_active`),b(o,s)})}function H(){if(!h)return;const e=n("body");if(e&&l){if(h.classList.contains("burger__btn_active")){e.style.overflow="hidden";return}e.style.overflow="auto",l.style.backgroundColor="white"}}function y(e,t){if(e){const i=n(`.${e} .back-btn`),o=n(`.${t}`);if(i&&o){i.addEventListener("click",()=>{const s=!o.classList.contains(`${t}_active`);o.classList.remove(`${t}_active`),b(o,s)});return}}}function M(){if(f&&_&&a){if(a.classList.contains("main_active")){_.style.opacity="0",f.style.display="none",u&&(u.style.display="none");return}u&&(u.style.display="block"),_.style.opacity="1",f.style.display="block"}}function I(){E(),window.addEventListener("scroll",E)}function E(){if(!(!l||!v)){if(window.scrollY>50||v.classList.contains("cart_active")){l.style.backgroundColor="white",l.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",l.style.transition="background-color 0.3s ease, box-shadow 0.3s ease";return}l.style.backgroundColor="transparent",l.style.boxShadow="none"}}function b(e,t){function o(r){return r<.5?2*r*r:-1+(4-2*r)*r}function s(r){const d=t?r:1-r;e.style.height=`${d*100}dvh`,e.style.opacity=`${d}`}t&&(e.style.visibility="visible"),S({timing:o,draw:s,duration:300}),t||setTimeout(()=>{e.style.visibility="hidden",e.style.height="0"},300)}function S({timing:e,draw:t,duration:i}){let o=performance.now();requestAnimationFrame(function s(r){let c=(r-o)/i;c>1&&(c=1);let d=e(c);t(d),c<1&&requestAnimationFrame(s)})}function P(e,t,i){window.addEventListener("resize",()=>{if(window.innerWidth>=768){if(h?.classList.remove("burger__btn_active"),!a||!e||!t||!i)return;m(a,"remove","main_active"),a.style.visibility="hidden",a.style.height="0vh",a.style.opacity="0",u&&(u.style.display="block"),f&&_&&(_.style.opacity="1",f.style.display="block"),m(e,"remove","shop_active"),m(t,"remove","info_active"),m(i,"remove","profile_active")}})}function N(){const e=g.get("accessToken"),t=n(".menu_profile");t&&(e||(t.innerHTML=`
    <li class="menu__item">
      <a href="/Vitamin/login.html" class="menu__login">
         Sign in
      </a>
    </li>
    
    <li class="menu__item red">
       <a href="/Vitamin/registration.html" class="menu__reg">
         Registration
      </a>
    </li>
    `))}export{C as i};
