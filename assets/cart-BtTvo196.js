import{g as r,a as g,c as a,r as u}from"./use-call-dom-DDNnwvp7.js";async function W(t){let e=null;if(typeof t=="string"?e=r(t):e=t,!e)return;const n=r(".counter__plus",e),o=r(".counter__minus",e),i=r(".counter__items",e);let s=Number(i?.innerText);!i||!n||!o||(w(n,o,s),o.addEventListener("click",()=>{Y(i,s),s=Number(i?.innerText),w(n,o,s)}),n.addEventListener("click",()=>{U(i,s),s=Number(i?.innerText),w(n,o,s)}),T(i,s))}function T(t,e){t.textContent=e.toString()}function Y(t,e){e>1&&(e--,T(t,e))}function U(t,e){e<999&&(e++,T(t,e))}function w(t,e,n){n!==999&&n!==1&&(t.style.opacity="1",e.style.opacity="1"),n===999&&(t.style.opacity="0.3"),n===1&&(e.style.opacity="0.3")}function V(t){const e=r(".dropdown",t),n=r(".dropdown__box",t),o=r(".dropdown__text",t),i=r(".dropdown__list",t),s=g(".dropdown__item",t);!e||!n||!o||!i||!s||(e.addEventListener("click",c=>J(c,n,i)),s.forEach(c=>{c.addEventListener("click",()=>j(c,o,n,i))}),document.addEventListener("click",c=>q(c,e,i,n)))}function J(t,e,n){t.stopPropagation(),e&&(e.classList.toggle("dropdown__box_active"),n&&n.classList.toggle("dropdown__list_active"))}function z(t,e){t&&(a(t,"remove","dropdown__box_active"),e&&a(e,"remove","dropdown__list_active"))}function j(t,e,n,o){const i=t.textContent;i&&e&&(e.textContent=i,J(event,n,o))}function q(t,e,n,o){e&&n&&!e.contains(t.target)&&!n.contains(t.target)&&z(o,n)}const P=r(".header__bag"),f=r(".cart"),A=r(".cart__close"),F=r(".cart__bg"),p=r(".cart__items");let v=g(".prod"),d;const C=r(".info__backbtn");async function et(){!P||!A||!F||!p||(P.addEventListener("click",t=>{G(t),S()}),A.addEventListener("click",()=>{O(),S()}),H(),_(),v.forEach(t=>{const e=r(".prod__autoship-text",t);e&&X(e)}),F.addEventListener("click",()=>{O(),S()}))}function G(t){t.stopPropagation(),f&&(a(f,"add","cart_active"),C&&(C.style.zIndex="1"))}function O(){f&&(a(f,"remove","cart_active"),C&&(C.style.zIndex="25"))}function K(t){v&&v.forEach(e=>{const n=r(".prod__close",e);n&&n.addEventListener("click",()=>{e.remove(),Q(t)})})}function Q(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");if(e=e.filter(n=>n.id!==t),localStorage.setItem("cartItems",JSON.stringify(e)),_(),e.length===0){if(r(".cart__empty"))return;d=!0,h(d),_();return}}function S(){if(!f)return;const t=r("body"),e=r("header");if(!t||!e)return;const n=window.innerWidth-document.documentElement.clientWidth,o=window.scrollY,i=r(".info__backbtn");if(f.classList.contains("cart_active")){t.style.position="fixed",t.style.top=`-${o}px`,t.style.left="0",t.style.width="100%",t.style.overflow="hidden",t.style.paddingRight=`${n}px`,e.style.paddingRight=`${n}px`,o>50&&i&&(i.style.opacity="0");return}const s=Math.abs(parseInt(t.style.top,10))||0;t.style.position="",t.style.top="",t.style.left="",t.style.width="",t.style.overflow="",t.style.paddingRight="",e.style.paddingRight="",i&&(i.style.opacity=""),window.scrollTo(0,s)}function X(t){window.innerWidth<768&&(t.innerText="Deliver every")}function E(t,e=!1,n="30",o=1){if(!p)return;const i=u("div",["cart__item","prod",`prod_${t.id}`]),s=u("div","prod__img");t.type==="Vitamins & Dietary Supplements"&&a(s,"add","prod__img_purple"),t.type==="Minerals"&&a(s,"add","prod__img_green-mint"),t.type==="Prenatal Vitamins"&&a(s,"add","prod__img_pink"),t.type==="Pain Relief"&&a(s,"add","prod__img_blue"),t.type==="Antioxidants"&&a(s,"add","prod__img_orange"),t.type==="Weight Loss"&&a(s,"add","prod__img_dark-blue"),(t.type==="Probiotics"||t.type==="Sale%")&&a(s,"add","prod__img_red"),s.innerHTML=`
    <img src="${t.img}" alt="" />
  `;const c=u("div","prod__info"),l=u("div","prod__title-and-close"),x=u("p","prod__title");x.innerText=t.name;const y=u("div","prod__close");y.innerHTML=`
    <span></span>
    <span></span>
  `;const I=u("div","prod__counter-and-price"),$=u("div","prod__counter");$.innerHTML=`
    <button class="counter__minus">
      <svg>
        <use href="#minus"></use>
      </svg>
    </button>
    <p class="counter__items">${o}</p>
    <button class="counter__plus">
      <svg>
        <use href="#plus"></use>
      </svg>
    </button>
  `,W($);const b=u("p","prod__price"),R=L(t.price,t.discount,o),D=N(t.price,o);t.type==="Sale%"?(a(b,"add","prod__price_sale"),b.innerHTML=`<span>$${D}</span> $${R}`):b.innerText=`$${D}`;const k=u("div","prod__autoship");k.innerHTML=`
    <div class="prod__checkbox">
      <input type="checkbox" name="autoship" ${e?"checked":""}/>
      <span></span>
    </div>
    <p class="prod__autoship-text">Autoship every</p>
    <div class="dropdown">
      <div class="dropdown__box">
        <p class="dropdown__text">${n}</p>
        <div class="dropdown__arrow">
          <svg>
            <use href="#back-arrow"></use>
          </svg>
        </div>
      </div>
      <div class="dropdown__list">
        <button class="dropdown__item">10</button>
        <button class="dropdown__item">20</button>
        <button class="dropdown__item">30</button>
        <button class="dropdown__item">40</button>
        <button class="dropdown__item">50</button>
        <button class="dropdown__item">60</button>
      </div>
    </div>
    days
  `,V(k),l.appendChild(x),l.appendChild(y),I.appendChild($),I.appendChild(b),c.appendChild(l),c.appendChild(I),c.appendChild(k),i.appendChild(s),i.appendChild(c),p.appendChild(i),d=!1,h(d),Z(t),v=g(".prod"),K(t.id),M(t)}function L(t,e,n){const o=parseFloat(t);if(isNaN(o))throw new Error("Invalid price format");return(o*(1-e/100)*n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function N(t,e){const n=parseFloat(t);if(isNaN(n))throw new Error("Invalid price format");return(n*e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function Z(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");const n=e.some(l=>l.id===t.id),o=r(".autoship__on-off"),i=r(".count__items");if(!o||!i)return;const s=o.classList.contains("autoship__on-off_active")||!1,c=Number(i.innerText);n||e.push({...t,autoshipChecked:s,autoshipDays:"30",counts:c}),localStorage.setItem("cartItems",JSON.stringify(e))}function M(t){const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=g(`.prod_${t.id} .dropdown__item`),i=r(`.prod_${t.id} .counter__minus`),s=r(`.prod_${t.id} .counter__plus`),c=r(`.prod_${t.id} .counter__items`);!e||!n||!o||!i||!s||!c||(e&&e.addEventListener("change",()=>{m(`${t.id}`,e.checked,n.textContent||"30",Number(c.textContent))}),n&&o.forEach(l=>{l.addEventListener("click",x=>{const y=x.target.textContent||"30";m(`${t.id}`,e.checked,y,Number(c.textContent))})}),i.addEventListener("click",()=>{B(t,Number(c.textContent)),m(`${t.id}`,e.checked,n.textContent||"30",Number(c.textContent)),_()}),s.addEventListener("click",()=>{B(t,Number(c.textContent)),m(`${t.id}`,e.checked,n.textContent||"30",Number(c.textContent)),_()}))}function B(t,e){const n=L(t.price,t.discount,e),o=N(t.price,e),i=r(`.prod_${t.id} .prod__price`);i&&(t.type==="Sale%"?i.innerHTML=`<span>$${o}</span> $${n}`:i.innerText=`$${o}`)}function m(t,e,n,o){let i=JSON.parse(localStorage.getItem("cartItems")||"[]");const s=i.findIndex(c=>c.id===Number(t));s!==-1&&(i[s].autoshipChecked=e,i[s].autoshipDays=n,i[s].counts=o),localStorage.setItem("cartItems",JSON.stringify(i))}function H(){const t=JSON.parse(localStorage.getItem("cartItems")||"[]");if(t.length===0){d=!0,h(d);return}d=!1,h(d),p&&(p.innerHTML="",t.forEach(e=>{E(e,e.autoshipChecked,e.autoshipDays,e.counts),M(e)}))}function nt(t){let e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.length===0&&(d=!0,h(d)),e.some(o=>o.id===t.id)||E(t),_()}function it(t){if(!t.disabled_subscribe)return;const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=r(".autoship__dropdown .dropdown__text");if(!o)return;const i=o.textContent,s=r(`.prod_${t.id} .counter__items`);!e||!n||!i||!s||(e.checked=!0,n.innerText=i,m(`${t.id}`,e.checked,n.textContent||"30",Number(s.textContent)))}function ot(t){if(!t.disabled_subscribe)return;const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=r(`.prod_${t.id} .counter__items`);!e||!n||!o||(e.checked=!1,m(`${t.id}`,e.checked,n.textContent||"30",Number(o.textContent)))}function rt(t){const e=r(`.prod_${t.id} .prod__checkbox input`),n=r(`.prod_${t.id} .dropdown__text`),o=r(`.prod_${t.id} .counter__items`),i=r(".count__counter .counter__items");let s=JSON.parse(localStorage.getItem("cartItems")||"[]");s.length===0&&(d=!0,h(d));const c=s.some(l=>l.id===t.id);if(i){if(!c){E(t,!1,"30",Number(i.innerText)),_();return}!e||!n||!o||(m(`${t.id}`,e.checked,n.textContent||"30",Number(o.textContent)+Number(i.innerText)),H(),_())}}function h(t){if(p&&(t||(a(p,"remove","empty"),g(".cart__empty").forEach(n=>n.remove())),t)){const e=u("p","cart__empty");e.innerText="Your cart is empty",a(p,"add","empty"),p.appendChild(e)}}function _(){let t=JSON.parse(localStorage.getItem("cartItems")||"[]"),e=0,n;const o=r("#total-cart-price");o&&(t?.length===0&&(o.innerText="$0"),t.forEach(i=>{i.type==="Sale%"?n=L(i.price,i.discount,i.counts):n=N(i.price,i.counts),e+=parseFloat(n.replace(/,/g,"").replace(/\s/g,""))}),o.innerText=`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`)}export{rt as a,nt as b,G as c,it as d,W as e,et as f,L as g,N as h,V as i,ot as r};
