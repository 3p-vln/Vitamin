import{g as $,a as L}from"./useApi-Bi0IovR0.js";import{g as u,r,c as l}from"./useCallDom-CYt_pDlL.js";let p=1;const y=10,P=6,C=window.innerWidth;async function R(n){const i=u(n);if(!i)return;const e=await $(!1);if(e.errors)return;const a=e.data;await M(a,i,"white")}async function b(n,i=1,e){const a=u(n);if(!a)return;let s={data:[]};if(s=await L(i,y,e),s.errors||s.data.length===0){a.innerHTML="<p>Нет товаров в данной категории</p>";return}const t=s.data,_=Math.min(t.length,y);await M(t.slice(0,_),a,"gray"),T(i,n),C<768&&S()}async function M(n,i,e){let a=10;C<768&&(a=6),C<375&&(a=4),n.slice(0,a).forEach(t=>{const _=r("a",["prod-card",`${t.id}`,`prod-card_${e}`]),d=r("div","prod-card__content"),f=r("div","prod-card__img");f.innerHTML=`
        <picture>
          <img src="${t.img}" />
        </picture>
      `;const g=r("div","prod-card__discount");g.innerText=`-${t.discount}%`;const c=r("div",["prod-card__info","info"]),o=r("p","info__category");t.type==="Vitamins & Dietary Supplements"&&l(o,"add","info__category_purple"),t.type==="Minerals"&&l(o,"add","info__category_green-mint"),t.type==="Prenatal Vitamins"&&l(o,"add","info__category_purple"),t.type==="Pain Relief"&&l(o,"add","info__category_blue"),t.type==="Antioxidants"&&l(o,"add","info__category_orange"),t.type==="Weight Loss"&&l(o,"add","info__category_dark-blue"),t.type==="Probiotics"&&l(o,"add","info__category_red"),t.type==="Sale%"&&l(o,"add","info__category_red"),o.innerText=t.type;const m=r("p","info__name");m.innerText=t.name;const v=x(t.price,t.discount),h=r("p","info__price");t.type==="Sale%"?(h.innerHTML=`
      <span>$${t.price}</span> $${v}
      `,l(h,"add","info__price_sale")):h.innerText=`$${t.price}`,c.appendChild(o),c.appendChild(m),c.appendChild(h),d.appendChild(f),t.type==="Sale%"&&d.appendChild(g),d.appendChild(c),_.appendChild(d),i.appendChild(_)})}function x(n,i){const e=parseFloat(n);if(isNaN(e))throw new Error("Invalid price format");return+(e*(1-i/100)).toFixed(2)}function T(n,i){const e=u(".catalog-list__pagination");if(!e)return;let s=new URLSearchParams(window.location.search).get("category")||void 0;const _=Math.ceil((s?20:100)/y),d=u(i);if(!d)return;e.innerHTML="";const f=r("button",["catalog-list__btn","catalog-list__btn_prew"]);f.innerHTML='<svg><use href="#back-arrow"></use></svg>',f.onclick=()=>w(n-1,d,s),e.appendChild(f);for(let c=1;c<=_;c++){const o=r("button",["catalog-list__btn","catalog-list__btn_page"]);n===c&&l(o,"add","catalog-list__btn_active"),o.innerText=`${c}`,o.onclick=()=>w(c,d,s),e.appendChild(o)}const g=r("button",["catalog-list__btn","catalog-list__btn_next"]);g.innerHTML='<svg><use href="#back-arrow"></use></svg>',g.onclick=()=>w(n+1,d,s),e.appendChild(g)}function w(n,i,e){if(n<1||n>Math.ceil(100/y))return;p=n;const a=new URLSearchParams(window.location.search);a.set("page",n.toString()),e?a.set("category",e):a.delete("category"),window.history.pushState({},"",`?${a.toString()}`),i.innerHTML="",b(`.${i.className}`,p,e),T(p,`.${i.className}`)}function S(){const n=u(".catalog-list__view-more");if(!n)return;const i=Math.ceil(20/P);p<i?n.style.display="flex":n.style.display="none",n.onclick=()=>{p<i&&(p+=1,b(".catalog-list__content",p))}}export{b as a,R as r,T as u};
