import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./check-auth-CB7tDQ7V.js";import{J as l}from"./just-validate.es-C73wyOde.js";import{a as s}from"./api-client-B_O66FpV.js";import{a as t}from"./js.cookie-Cz0CWeBA.js";import{A as m}from"./index-DConTh1S.js";import"./axios-B-d85qs8.js";async function d(o){try{const e=await s.post("/auth/login",o);e.status,e.status===200&&(t.set("refreshToken",e.data.refreshToken,{path:"/"}),t.set("accessToken",e.data.accessToken,{path:"/"}))}catch(e){if(e instanceof m&&e.response){const r=document.querySelector(".login-form__error-message");r&&(e.response.data.message==="Не правильний пароль"?r.innerHTML="Wrong password":e.response.data.message==="Користувач не знайдений"?r.innerHTML="Wrong email":r.innerHTML="Error, try again later")}return}const a=await s.get("/profile/info");"email"in a.data&&(localStorage.setItem("userInfo",JSON.stringify(a.data)),window.location.href="/Vitamin")}function u(){new l("#login-form").addField("#regular-login-email",[{rule:"required",errorMessage:"Email is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9а-яА-Я."_%+-]+@[a-zA-Zа-яА-Я0-9-.]+\.[a-zA-Zа-яА-Я]{2,}$/u,errorMessage:"Enter a valid email address!"}]).addField("#login-password",[{rule:"required",errorMessage:"Password is required"},{rule:"minLength",value:8,errorMessage:"Password must be at least 8 characters long"},{rule:"maxLength",value:30,errorMessage:"Password must be less than 30 characters"}]).onSuccess(async()=>{console.log("Form is valid. Submitting...");const a=document.getElementById("login-form"),e=new FormData(a),r={};for(let[i,n]of e.entries())r[i]=n;await d(r)})}document.addEventListener("DOMContentLoaded",async()=>{u()});
