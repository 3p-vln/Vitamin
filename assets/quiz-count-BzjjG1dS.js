import{g as n,a as g}from"./use-call-dom-DDNnwvp7.js";import{J as h}from"./just-validate.es-C73wyOde.js";function c(){return new Promise(e=>{const t=n("#firstQuestion"),r=n("#firstName");if(!t||!r){e(!1);return}const i=new h(t,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0});if(i.addField("#firstName",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]),document.readyState==="complete"){i.revalidate().then(s=>{s&&localStorage.setItem("firstName",r.value),e(s)});return}e(!1)})}function l(){return new Promise(e=>{const t=n("#emailQuestion"),r=n("#email");if(!t||!r){e(!1);return}const i=new h(t,{focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0});if(i.addField("#email",[{rule:"required",errorMessage:"This field is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})$/,errorMessage:"Write correct email"}]),document.readyState==="complete"){i.revalidate().then(s=>{e(s)});return}e(!1)})}const d=n(".count__current"),u=g(".quiz"),f=g("#next-btn"),m=n(".back");let a=p();function p(){const e=new URLSearchParams(window.location.search);return parseInt(e.get("question")||"0",10)}function v(e){const t=new URLSearchParams(window.location.search);t.set("question",e.toString()),window.history.replaceState({},"",`${window.location.pathname}?${t.toString()}`)}function w(e){u.forEach(t=>t.classList.remove("active")),u[e].classList.add("active"),d&&(d.textContent=(e+1).toString()),v(e)}function o(e){const t=a+e;t>=0&&t<u.length&&(a=t,w(a)),t<0&&window.history.back()}function F(){w(a),f&&(c(),l(),f.forEach(e=>{e.addEventListener("click",async t=>{if(t.preventDefault(),a===0){if(!await c())return;o(1);return}if(a===8){if(!await l())return;window.location.href="/Vitamin/personal-pack.html";return}o(1)})}),m&&m.addEventListener("click",()=>o(-1)))}export{F as default};
