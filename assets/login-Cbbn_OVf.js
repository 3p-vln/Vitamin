import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./check-auth-Cd-eomUv.js";import{J as i}from"./just-validate.es-C73wyOde.js";import{a as t}from"./js.cookie-Cz0CWeBA.js";import{l,a as c}from"./use-api-CoVlJz1c.js";async function m(o){try{const e=await l(o);if(e.accessToken){t.set("refreshToken",e.refreshToken,{path:"/"}),t.set("accessToken",e.accessToken,{path:"/"});const r=await c();"email"in r&&(localStorage.setItem("userInfo",JSON.stringify(r)),window.location.href="/Vitamin")}if("message"in e.errors[0]){const r=document.querySelector(".login-form__error-message");if(!r)return;switch(e.errors[0].message){case"Не правильний пароль":r.innerHTML="Wrong password";break;case"Користувач не знайдений":r.innerHTML="Wrong email";break;default:r.innerHTML="Error, try again later"}}}catch(e){console.error(e)}}function d(){new i("#login-form").addField("#regular-login-email",[{rule:"required",errorMessage:"Email is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9а-яА-Я."_%+-]+@[a-zA-Zа-яА-Я0-9-.]+\.[a-zA-Zа-яА-Я]{2,}$/u,errorMessage:"Enter a valid email address!"}]).addField("#login-password",[{rule:"required",errorMessage:"Password is required"},{rule:"minLength",value:8,errorMessage:"Password must be at least 8 characters long"},{rule:"maxLength",value:30,errorMessage:"Password must be less than 30 characters"}]).onSuccess(async()=>{console.log("Form is valid. Submitting...");const e=document.getElementById("login-form"),r=new FormData(e),s={};for(let[a,n]of r.entries())s[a]=n;try{await m(s)}catch(a){console.error(a)}})}document.addEventListener("DOMContentLoaded",async()=>{d()});
