function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/header-CDqzqvqN.js","assets/use-call-dom-DDNnwvp7.js","assets/order-list-DT6HP3u6.js","assets/cart-DcLU71fj.js","assets/dropdown-7a_ekS_C.js","assets/use-api-CdSl8Y54.js","assets/order-accordion-ppYV8cx6.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{u as F,_}from"./lazy-load-Cgk4cJeL.js";import{i as b}from"./dropdown-7a_ekS_C.js";import{g as r}from"./use-call-dom-DDNnwvp7.js";import{J as y}from"./just-validate.es-C73wyOde.js";import{i as x}from"./use-api-CdSl8Y54.js";import{I as M}from"./index-yFKSUj0c.js";import{s as O,r as S}from"./stopPreload-BW9xUuEZ.js";async function T(){return new Promise(t=>{const o=r("#create-order");if(!o)return;const s=new y(o,{focusInvalidField:!0,lockForm:!1,validateBeforeSubmitting:!0});s.addField("#first-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#last-name",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Only letters are allowed"}]).addField("#address-line1",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#address-line2",[{rule:"minLength",value:5,errorMessage:"Must be at least 5 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}\d.,\s]+$/u,errorMessage:"Write correct address"}]).addField("#city",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:2,errorMessage:"Must be at least 2 characters"},{rule:"maxLength",value:50,errorMessage:"Must be less than 50 characters"},{rule:"customRegexp",value:/^[\p{L}]+$/u,errorMessage:"Enter a valid city name"}]).addField("#state",[{rule:"required",errorMessage:"This field is required"}]).addField("#zip",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:3,errorMessage:"Must be at least 3 characters"},{rule:"maxLength",value:10,errorMessage:"Must be less than 10 characters"},{rule:"customRegexp",value:/^\d+$/,errorMessage:"Enter a valid ZIP / Postal Code"}]).addField("#mail",[{rule:"required",errorMessage:"This field is required"},{rule:"customRegexp",value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})$/,errorMessage:"Write correct email"}]).addField("#phone",[{rule:"required",errorMessage:"This field is required"},{rule:"maxLength",value:19,errorMessage:"Must be less than 13 characters"}]).addField("#card",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:19,errorMessage:"Must be at least 16 characters"}]).addField("#expiration",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:5,errorMessage:"Must be at least 4 characters"}]).addField("#cvc",[{rule:"required",errorMessage:"This field is required"},{rule:"minLength",value:3,errorMessage:"Must be at least 3 characters"}]),s.validate(),s.onSuccess(()=>t(!0)),s.onFail(()=>t(!1))})}const I=r(".create-order-form__btn"),L=r(".order-list__btn"),e=JSON.parse(localStorage.getItem("userInfo")||"null"),a=JSON.parse(localStorage.getItem("orderInfo")||"null"),d=r("#first-name"),c=r("#last-name"),m=r("#address-line1"),v=r("#address-line2"),g=r("#city"),f=r("#state"),p=r("#zip"),h=r("#mail"),l=r("#phone"),i=r("#card"),u=r("#expiration"),n=r("#cvc");async function w(){!I||!L||(N(),k(),L.addEventListener("click",()=>{I.click()}),I.addEventListener("click",async()=>{await T()&&(z(),E())}))}function E(){e||(localStorage.removeItem("cartItems"),window.location.href="/Vitamin/successful-order.html");const t=JSON.parse(localStorage.getItem("cartItems")||"[]");if(t.length===0){console.log("Cart is empty!");return}console.log(e);const o={order:t.map(s=>({product_id:s.id,quantity:s.counts})),user_id:e.user_id};try{x(o).then(s=>{console.log("Order created successfully:",s),localStorage.removeItem("cartItems"),window.location.href="/Vitamin/successful-order.html"})}catch(s){console.error(s)}}function k(){!i||!u||!n||!l||(M(i,{mask:"0000-0000-0000-0000"}),M(u,{mask:"00/00"}),M(n,{mask:"000"}),M(l,{mask:"+000 (00) 00 00 000"}))}function z(){if(!d||!c||!m||!v||!g||!f||!p||!h||!l||!i||!u||!n)return;const t={firstName:d.value,lastName:c.value,addressFirst:m.value,addressSecond:v.value,city:g.value,state:f.value,zip:p.value,email:h.value,phone:l.value,card:i.value,date:u.value,cvc:n.value};console.log("Order created:",t),localStorage.setItem("orderInfo",JSON.stringify(t))}function N(){if(!(!d||!c||!m||!v||!g||!f||!p||!h||!l||!i||!u||!n)&&!(!e&&a)){if(a&&!e){d.value=a.firstName||"",c.value=a.lastName||"",m.value=a.addressFirst||"",v.value=a.addressSecond||"",g.value=a.city||"",f.value=a.state||"",p.value=a.zip||"",h.value=a.email||"",l.value=a.phone||"",i.value=a.card||"",u.value=a.expiration||"",n.value=a.cvc||"";return}if(e){if(console.log(e),d.value=e.first_name||"",c.value=e.last_name||"",m.value=e.address_one||"",v.value=e.address_two||"",g.value=e.city||"",f.value=e.state_province||"",p.value=e.postal_code||"",h.value=e.email||"",l.value=e.phone||"",!e.card_info)return;i.value=e.card_info.card_number||"",u.value=e.card_info.card_date||"",n.value=e.card_info.card_cvv||"";return}}}document.addEventListener("DOMContentLoaded",async()=>{[{importFn:()=>_(()=>import("./header-CDqzqvqN.js"),__vite__mapDeps([0,1])),selector:".header"},{importFn:()=>_(()=>import("./order-list-DT6HP3u6.js"),__vite__mapDeps([2,1,3,4,5])),selector:".order-list__prods"},{importFn:()=>_(()=>import("./order-accordion-ppYV8cx6.js"),__vite__mapDeps([6,1])),selector:".accordion"}].forEach(({importFn:s,selector:q})=>F(s,q));const o=r(".deliver-info__subitem_dropdown");o&&(b(o),await w(),O())});S();
