import{g as i,c as p}from"./use-call-dom-DDNnwvp7.js";import{a as h}from"./js.cookie-Cz0CWeBA.js";import{s as y}from"./scroll-lock-DIYiYMmB.js";function L(){const e=document.querySelectorAll(".header__user-name"),t=localStorage.getItem("userInfo");if(e&&t){const n=JSON.parse(t);e.forEach(o=>{const s=o;s.innerText=`${n.first_name} ${n.last_name}`})}}function B(){document.querySelectorAll(".sign-out").forEach(t=>{t.addEventListener("click",()=>{window.location.href="/Vitamin",localStorage.removeItem("userInfo"),h.remove("accessToken",{path:"/"}),h.remove("refreshToken",{path:"/"})})})}function S(){const e=document.getElementById("authPopup"),t=document.querySelector(".header__profile"),n=h.get("accessToken");t&&t.addEventListener("click",()=>{n?window.location.href="/Vitamin/profile.html":e.show()}),window.showPopup=function(){e.show()},e.querySelector(".auth-pop-up__close").addEventListener("click",()=>{e.close()}),e.addEventListener("click",s=>{const a=e.querySelector(".auth-pop-up__container"),c=s.target;c instanceof Node&&!a.contains(c)&&e.close()})}const k=i(".burger__btn"),r=i(".burger__menu.main"),f=i(".header__bag"),d=i(".header__logo"),u=i(".pack-info__bg_hulf-circle"),l=i(".header"),v=i(".cart");function H(){if(!r)return;const e=i(".menu__item_shop",r),t=i(".menu__item_info",r),n=i(".header__profile",r),o=i(".burger__menu.shop"),s=i(".burger__menu.info"),a=i(".burger__menu.profile");E(),k&&e&&o&&t&&s&&n&&a&&(m("burger__btn","main"),m("menu__item_shop","shop"),m("menu__item_info","info"),m("header__profile_adapt","profile"),g("shop__title","shop"),g("info__title","info"),g("profile__title","profile"),I(o,s,a)),L(),B(),S()}function m(e,t){const n=i(`.${e}`),o=i(`.${t}`);n&&o&&n.addEventListener("click",()=>{const s=!o.classList.contains(`${t}_active`);if(o.classList.contains("main")){o.classList.toggle(`${t}_active`),n.classList.toggle(`${e}_active`),$(),s?y.disablePageScroll():y.enablePageScroll(),b(o,s);return}o.classList.add(`${t}_active`),b(o,s)})}function g(e,t){if(e){const n=i(`.${e} .back-btn`),o=i(`.${t}`);if(n&&o){n.addEventListener("click",()=>{const s=!o.classList.contains(`${t}_active`);o.classList.remove(`${t}_active`),b(o,s)});return}}}function $(){if(f&&d&&r){if(r.classList.contains("main_active")){d.style.opacity="0",f.style.display="none",u&&(u.style.display="none");return}u&&(u.style.display="block"),d.style.opacity="1",f.style.display="block"}}function E(){w(),window.addEventListener("scroll",w)}function w(){!l||!v||(window.scrollY>50||v.classList.contains("cart_active")?(l.style.backgroundColor="white",l.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",l.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(l.style.backgroundColor="transparent",l.style.boxShadow="none"))}function b(e,t){function o(a){return a<.5?2*a*a:-1+(4-2*a)*a}function s(a){const _=t?a:1-a;e.style.height=`${_*100}dvh`,e.style.opacity=`${_}`}t&&(e.style.visibility="visible"),x({timing:o,draw:s,duration:300}),t||setTimeout(()=>{e.style.visibility="hidden",e.style.height="0"},300)}function x({timing:e,draw:t,duration:n}){let o=performance.now();requestAnimationFrame(function s(a){let c=(a-o)/n;c>1&&(c=1);let _=e(c);t(_),c<1&&requestAnimationFrame(s)})}function I(e,t,n){window.addEventListener("resize",()=>{if(window.innerWidth>=768){if(k?.classList.remove("burger__btn_active"),!r||!e||!t||!n)return;p(r,"remove","main_active"),r.style.visibility="hidden",r.style.height="0vh",r.style.opacity="0",u&&(u.style.display="block"),f&&d&&(d.style.opacity="1",f.style.display="block"),y.enablePageScroll(),p(e,"remove","shop_active"),p(t,"remove","info_active"),p(n,"remove","profile_active")}})}export{H as i};
