import{g as r,a as P,c as g}from"./useCallDom-DDNnwvp7.js";import{a as C,b as M,A as U}from"./index-wYSWI2m-.js";function q(){const t=document.querySelectorAll(".header__user-name"),e=localStorage.getItem("userInfo");if(t&&e){const n=JSON.parse(e);t.forEach(o=>{const s=o;s.innerText=`${n.first_name} ${n.last_name}`})}}let c=1;async function R(t){let e=null;if(typeof t=="string"?e=r(t):e=t,!e)return;const n=r(".counter__plus",e),o=r(".counter__minus",e),s=r(".counter__items",e);!s||!n||!o||(h(n,o),o.addEventListener("click",()=>{H(s),h(n,o)}),n.addEventListener("click",()=>{N(s),h(n,o)}),E(s))}function E(t){t.textContent=c.toString()}function H(t){c>1&&(c--,E(t))}function N(t){c<999&&(c++,E(t))}function h(t,e){c<999&&c>1&&(t.style.opacity="1",e.style.opacity="1"),c===999&&(t.style.opacity="0.3"),c===1&&(e.style.opacity="0.3")}function j(t){const e=r(".dropdown",t),n=r(".dropdown__box",t),o=r(".dropdown__text",t),s=r(".dropdown__list",t),i=P(".dropdown__item",t);!e||!n||!o||!s||!i||(e.addEventListener("click",a=>D(a,n,s)),i.forEach(a=>{a.addEventListener("click",()=>O(a,o,n,s))}),document.addEventListener("click",a=>V(a,e,s,n)))}function D(t,e,n){t.stopPropagation(),e&&(e.classList.toggle("dropdown__box_active"),n&&n.classList.toggle("dropdown__list_active"))}function z(t,e){t&&(g(t,"remove","dropdown__box_active"),e&&g(e,"remove","dropdown__list_active"))}function O(t,e,n,o){const s=t.textContent;s&&e&&(e.textContent=s,D(event,n,o))}function V(t,e,n,o){e&&n&&!e.contains(t.target)&&!n.contains(t.target)&&z(o,n)}const I=r(".header__bag"),f=r(".cart"),S=r(".cart__close"),T=r(".cart__bg"),k=P(".prod"),m=r(".info__backbtn");async function G(){!I||!S||!T||(I.addEventListener("click",t=>{J(t),y()}),S.addEventListener("click",()=>{A(),y()}),k.forEach(t=>{const e=r(".prod__counter",t),n=r(".prod__autoship",t),o=r(".prod__autoship-text",t);!e||!n||!o||(R(e),j(n),Y(o))}),W(),T.addEventListener("click",()=>{A(),y()}))}function J(t){t.stopPropagation(),f&&(g(f,"add","cart_active"),m&&(m.style.zIndex="1"))}function A(){f&&(g(f,"remove","cart_active"),m&&(m.style.zIndex="25"))}function W(){k&&k.forEach(t=>{const e=r(".prod__close",t);e&&e.addEventListener("click",()=>{t.remove()})})}function y(){if(!f)return;const t=r("body");if(t){if(f.classList.contains("cart_active")){t.style.overflow="hidden";return}t.style.overflow="auto"}}function Y(t){window.innerWidth<768&&(t.innerText="Deliver every")}function K(){document.querySelectorAll(".sign-out").forEach(e=>{e.addEventListener("click",()=>{localStorage.removeItem("userInfo"),C.remove("accessToken",{path:"/"}),C.remove("refreshToken",{path:"/"}),window.location.href="/Vitamin"})})}const L=r(".burger__btn"),u=r(".burger__menu.main"),b=r(".header__bag"),v=r(".header__logo"),_=r(".pack-info__bg_hulf-circle"),l=r(".header");function ot(){if(!u)return;const t=r(".menu__item_shop",u),e=r(".menu__item_info",u),n=r(".header__profile",u),o=r(".burger__menu.shop"),s=r(".burger__menu.info"),i=r(".burger__menu.profile");Z(),L&&t&&o&&e&&s&&n&&i&&(p("burger__btn","main"),p("menu__item_shop","shop"),p("menu__item_info","info"),p("header__profile_adapt","profile"),w("shop__title","shop"),w("info__title","info"),w("profile__title","profile")),q(),G(),K()}function p(t,e){if(t){const n=r(`.${t}`),o=r(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const s=!o.classList.contains(`${e}_active`);if(o.classList.contains("main")){o.classList.toggle(`${e}_active`),n.classList.toggle(`${t}_active`),Q(),X(),x(o,s);return}o.classList.add(`${e}_active`),x(o,s)});return}}}function w(t,e){if(t){const n=r(`.${t} .back-btn`),o=r(`.${e}`);if(n&&o){n.addEventListener("click",()=>{const s=!o.classList.contains(`${e}_active`);o.classList.remove(`${e}_active`),x(o,s)});return}}}function Q(){if(b&&v&&u){if(u.classList.contains("main_active")){v.style.opacity="0",b.style.display="none",_&&(_.style.display="none");return}_&&(_.style.display="block"),v.style.opacity="1",b.style.display="block"}}function X(){if(!L)return;const t=r("body");if(t&&l){if(L.classList.contains("burger__btn_active")){t.style.overflow="hidden";return}t.style.overflow="auto",l.style.backgroundColor="white"}}function Z(){l&&window.addEventListener("scroll",()=>{window.scrollY>50?(l.style.backgroundColor="white",l.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",l.style.transition="background-color 0.3s ease, box-shadow 0.3s ease"):(l.style.backgroundColor="transparent",l.style.boxShadow="none")})}function x(t,e){function o(i){return i<.5?2*i*i:-1+(4-2*i)*i}function s(i){const d=e?i:1-i;t.style.height=`${d*100}vh`,t.style.opacity=`${d}`}e&&(t.style.visibility="visible"),F({timing:o,draw:s,duration:300}),e||setTimeout(()=>{t.style.visibility="hidden",t.style.height="0"},300)}function F({timing:t,draw:e,duration:n}){let o=performance.now();requestAnimationFrame(function s(i){let a=(i-o)/n;a>1&&(a=1);let d=t(a);e(d),a<1&&requestAnimationFrame(s)})}const tt="https://www.mku-journal.online",$=M.create({baseURL:tt,headers:{"Content-Type":"application/json"}}),B=async t=>{try{return(await t).data}catch(e){return e instanceof U?(console.error("API error:",e.response?.data||e.message),{errors:[{message:e.response?.data?.message||e.message}]}):e instanceof Error?(console.error("General error:",e.message),{errors:[{message:e.message}]}):(console.error("Unknown error:",e),{errors:[{message:"An unexpected error occurred."}]})}},rt=(t,e,n)=>B($.get("/catalog/all-list",{params:{type:n,page:t,limit:e}})),st=t=>B($.get(`/catalog/${t}/info`)),it=t=>B($.get(`${t?"/catalog/recommendations?is_main=true":"/catalog/recommendations"}`));export{j as a,st as b,R as c,rt as d,it as g,ot as i};
